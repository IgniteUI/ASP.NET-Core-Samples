/*!@license
* Infragistics.Web.ClientUI infragistics.dv_geo.js 20.1.20201.45
*
* Copyright (c) 2011-2020 Infragistics Inc.
*
* http://www.infragistics.com/
*
* Depends:
*     jquery-1.4.4.js
*     jquery.ui.core.js
*     jquery.ui.widget.js
*     infragistics.util.js
*     infragistics.ext_core.js
*     infragistics.ext_collections.js
*     infragistics.ext_io.js
*     infragistics.ext_text.js
*     infragistics.ext_web.js
*     infragistics.dv_core.js
*     infragistics.ext_ui.js
*/
(function(factory){if(typeof define==="function"&&define.amd){define(["./infragistics.util","./infragistics.ext_core","./infragistics.ext_collections","./infragistics.ext_io","./infragistics.ext_text","./infragistics.ext_web","./infragistics.dv_core","./infragistics.ext_ui"],factory)}else{factory(igRoot)}})(function($){$.ig=$.ig||{};var $$t={};$.ig.globalDefs=$.ig.globalDefs||{};$.ig.globalDefs.$$z=$$t;$$0=$.ig.globalDefs.$$0;$$4=$.ig.globalDefs.$$4;$$7=$.ig.globalDefs.$$7;$$8=$.ig.globalDefs.$$8;$$b=$.ig.globalDefs.$$b;$$1=$.ig.globalDefs.$$1;$$w=$.ig.globalDefs.$$w;$$6=$.ig.globalDefs.$$6;$$a=$.ig.globalDefs.$$a;$.ig.$currDefinitions=$$t;$.ig.util.bulkDefine(["WebWorkerPostMessageHandler:a","HeatTileGeneratorWebWorker:b","CompletedSinkImpl:c","ITileGenerator:d","TileImageCreating:e","TileImageCreated:f","TileImageZoomChanging:j","ITileWorkCompletedSink:m","HeatTileGeneratorWorkerManager:o","TileWorkCompletedSink:p","XamMultiScaleImageView:s","ShapeRecordFilterEventHandler:x","GetTileImageUriEventHandler:ag","IMapRenderDeferralHandler:an","IEasingFunction:aq","XamMultiScaleImage:ar","DownloadingMultiScaleImageEventHandler:as","CancellingMultiScaleImageEventHandler:au","XamMultiScaleTileSource:aw","TriangulationStatusEventHandler:a3"]);var $a=$.ig.intDivide,$b=$.ig.util.cast,$c=$.ig.util.defType,$d=$.ig.util.defEnum,$e=$.ig.util.getBoxIfEnum,$f=$.ig.util.getDefaultValue,$g=$.ig.util.getEnumValue,$h=$.ig.util.getValue,$i=$.ig.util.intSToU,$j=$.ig.util.nullableEquals,$k=$.ig.util.nullableIsNull,$l=$.ig.util.nullableNotEquals,$m=$.ig.util.toNullable,$n=$.ig.util.toString$1,$o=$.ig.util.u32BitwiseAnd,$p=$.ig.util.u32BitwiseOr,$q=$.ig.util.u32BitwiseXor,$r=$.ig.util.u32LS,$s=$.ig.util.unwrapNullable,$t=$.ig.util.wrapNullable,$u=String.fromCharCode,$v=$.ig.util.castObjTo$t,$w=$.ig.util.compareSimple,$x=$.ig.util.tryParseNumber,$y=$.ig.util.tryParseNumber1,$z=$.ig.util.numberToString,$0=$.ig.util.numberToString1,$1=$.ig.util.parseNumber,$2=$.ig.util.compare,$3=$.ig.util.replace,$4=$.ig.util.stringFormat,$5=$.ig.util.stringFormat1,$6=$.ig.util.stringFormat2,$7=$.ig.util.stringCompare1,$8=$.ig.util.stringCompare2,$9=$.ig.util.stringCompare3,$aa=$.ig.util.equalsSimple,$ab=$.ig.util.tryParseInt32_1,$ac=$.ig.util.tryParseInt32_2,$ad=$.ig.util.intToString1,$ae=$.ig.util.parseInt32_1,$af=$.ig.util.parseInt32_2;$d("XBaseDataType:v",false,false,{Character:0,Number:1,Logical:2,Date:3,Memo:4,FloatingPoint:5,Binary:6,General:7,Picture:8,Currency:9,DateTime:10,Integer:11,VariField:12,Variant:13,Timestamp:14,"Double:double1":15,AutoIncrement:16});$d("ShapeType:t",false,false,{None:0,Point:1,PolyLine:3,Polygon:5,PolyPoint:8,PointZ:11,PolyLineZ:13,PolygonZ:15,PolyPointZ:18,PointM:21,PolyLineM:23,PolygonM:25,PolyPointM:28,PolyPatch:31});$c("HeatTileScaler:q","Object",{b:0,c:0,d:0,e:0,init:function(){$.ig.$op.init.call(this);this.b=85.05112878- -85.05112878;this.c=180- -180;this.d=this.k(85.05112878);this.e=this.k(85.05112878)-this.k(-85.05112878)},k:function(a){var b=a*.017453292519943295;var c=Math.sin(b);var d=.5*Math.log((1+c)/(1-c));return d},a:function(a,b){var c=new $$a.ae(0,b.left()/a.width(),b.top()/a.height(),b.width()/a.width(),b.height()/a.height());var d=c.left()+c.width()*a.left();var e=c.left()+c.width()*a.right();var f=c.top()+c.height()*a.top();var g=c.top()+c.height()*a.bottom();var h=new $$t.r(d,f,e,g);return h},m:function(a){a=Math.exp(2*a);return Math.asin((a-1)/(a+1))/.017453292519943295},t:function(a,b,c){var d=(a-c.top())*b.width()+b.top()*c.height();d=this.k(85.05112878)-d/(c.height()/this.e);return $$t.$q.m(d)},r:function(a,b,c){var d=c.top()+this.l(a,c.height());return(d-b.top()*c.height())/b.width()},l:function(a,b){a=a>-85.05112878?a<85.05112878?a:85.05112878:-85.05112878;var c=this.k(a);var d=(this.d-c)*b/this.e;return d},u:function(a,b,c){var d=b.left()+b.width()*(a-c.left())/c.width();return-180+d*this.c},s:function(a,b,c){var d=(a- -180)/this.c;return c.left()+c.width()*(d-b.left())/b.width()},i:function(a,b){var c=$$t.$q.a(a,b);return this.t(b.bottom(),a,b)},g:function(a,b){var c=$$t.$q.a(a,b);return this.t(b.top(),a,b)},j:function(a,b){var c=$$t.$q.a(a,b);return this.u(b.left(),a,b)},h:function(a,b){var c=$$t.$q.a(a,b);return this.u(b.right(),a,b)},v:function(a,b,c){var d=c.height();var e=c.top();for(var f=0;f<a.count();f++){var g=a.__inner[f];g=g>-85.05112878?g<85.05112878?g:85.05112878:-85.05112878;var h=g*.017453292519943295;var i=Math.sin(h);var j=.5*Math.log((1+i)/(1-i));var k=(this.d-j)*d/this.e;k=e+k;a.__inner[f]=(k-b.top()*d)/b.width()}},w:function(a,b,c){var d=c.left();var e=c.width();var f=b.left();var g=b.width();for(var h=0;h<a.count();h++){var i=(a.__inner[h]- -180)/this.c;a.__inner[h]=c.left()+c.width()*(i-b.left())/b.width()}},$type:new $.ig.Type("HeatTileScaler",$.ig.$ot)},true);$c("HeatTileGeneratorWorker:l","Object",{f:null,a:null,n:0,o:0,p:0,w:null,_u:0,_h:false,r:0,t:function(){return this.r},g:function(){return this.f},init:function(a){$.ig.$op.init.call(this);this.f=a;$$t.$l.s++;if($$t.$l.s==0x8000000000000000){$$t.$l.s=0}this.r=$$t.$l.s},doWork:function(){var a=this.g().blurRadius();var b=a;var c=this.g().maxBlurRadius();var d=this.g().scaler();this.n=this.g().x();this.o=this.g().y();this.p=this.g().z();if(this.g().useBlurRadiusAdjustedForZoom()&&this.p>0){var e=Math.sqrt(1*1+1*1)*Math.pow(2,this.p-1);b=a*e}if(!$.ig.util.isNaN(c)){if(b>c){b=c}}var f=this.g().xValues();var g=this.g().yValues();var h=this.g().values();var i=this.g().xValues().length;var j=this.g().yValues().length;var k;var l;var m;var n;var o;var p;var q;var r=this.g().minimumVisibleLongitude();var s=this.g().maximumVisibleLongitude();var t=this.g().minimumVisibleLatitude();var u=this.g().maximumVisibleLatitude();var v=this.q(this.g().tileViewport(),b);var w=this.c(v,b);var x=Math.abs(d.t(0,this.g().window(),this.g().tileViewport())-d.t(b,this.g().window(),this.g().tileViewport()));var y=Math.abs(d.u(0,this.g().window(),this.g().tileViewport())-d.u(b,this.g().window(),this.g().tileViewport()));var z;var aa;var ab=new $$4.x(Number,0);var ac=new $$4.x(Number,0);var ad=new $$4.x(Number,0);for(var ae=0;ae<i;ae++){k=f[ae];l=g[ae];m=h[ae];n=k-y;o=k+y;p=l-x;q=l+x;if(o<r||q<t||p>u||n>s){continue}ab.add(k);ac.add(l);ad.add(m)}var af=this.d(this.g().tileViewport());var ag=this.b(this.g().tileViewport());var ah=$.ig.truncate(this.g().tileViewport().width());var ai=ac.count();d.v(ac,this.g().window(),this.g().tileViewport());d.w(ab,this.g().window(),this.g().tileViewport());var aj;var ak;var al;var am;for(var an=0;an<ai;an++){z=$.ig.truncate(Math.floor(ab.__inner[an]-b));aa=$.ig.truncate(Math.floor(ac.__inner[an]-b));for(var ao=z;ao<z+v;ao++){for(var ap=aa;ap<aa+v;ap++){aj=ao-z;ak=ap-aa;if(ao<0||ao>ah-1||ap<0||ap>ah-1){continue}al=w[ak*v+aj];am=ad.__inner[an]*al;ag[ap*ah+ao]=ag[ap*ah+ao]+am}}}var aq=ag.length;var ar=-1.7976931348623157e308;var as=1.7976931348623157e308;var at;if(!$.ig.util.isNaN(this.g().globalMinimum())&&!$.ig.util.isNaN(this.g().globalMaximum())&&this.g().useGlobalMinMax()&&!this.g().testRun()){as=this.g().globalMinimum();ar=this.g().globalMaximum();if(!$.ig.util.isNaN(this.g().minimumValue())){as=this.g().minimumValue()}if(!$.ig.util.isNaN(this.g().maximumValue())){ar=this.g().maximumValue()}}else if(!$.ig.util.isNaN(this.g().minimumValue())&&!$.ig.util.isNaN(this.g().maximumValue())){as=this.g().minimumValue();ar=this.g().maximumValue()}else{var au=-1;var av=-1;for(var aw=0;aw<aq;aw++){at=ag[aw];if(at>0){if(at>ar){ar=at;au=aw}if(at<as){as=at;av=aw}}}var ax=$.ig.truncate(Math.floor(au/ah));var ay=au%ah;var az=$.ig.truncate(Math.floor(av/ah));var a0=av%ah;this.g().globalMinimum(as);this.g().globalMaximum(ar);var a1=0;var a2=0;var a3=0;var a4=0;var a5=0;var a6=0;for(var a7=0;a7<ai;a7++){z=$.ig.truncate(Math.floor(ab.__inner[a7]-b));aa=$.ig.truncate(Math.floor(ac.__inner[a7]-b));for(var a8=z;a8<z+v;a8++){for(var a9=aa;a9<aa+v;a9++){aj=a8-z;ak=a9-aa;if(a8<0||a8>ah-1||a9<0||a9>ah-1){continue}if(a8==ay&&a9==ax){a1++;a3=a3+d.t(ac.__inner[a7],this.g().window(),this.g().tileViewport());a4=a4+d.u(ab.__inner[a7],this.g().window(),this.g().tileViewport())}if(a8==a0&&a9==az){a2++;a5=a5+d.t(ac.__inner[a7],this.g().window(),this.g().tileViewport());a6=a6+d.u(ab.__inner[a7],this.g().window(),this.g().tileViewport())}}}}this.i=a3/a1;this.j=a4/a1;this.k=a5/a2;this.l=a6/a2;if(!$.ig.util.isNaN(this.g().minimumValue())){as=this.g().minimumValue()}if(!$.ig.util.isNaN(this.g().maximumValue())){ar=this.g().maximumValue()}}if(!this.g().testRun()){this.x(af,ag,ar,as);this.a=af}this.z()},x:function(a,b,c,d){var e;var f=b.length;if(this.g().useLogarithmicScale()){if(d<=0){d=0}else{d=Math.logBase(d,this.g().logarithmBase())}if(c<=0){c=0}else{c=Math.logBase(c,this.g().logarithmBase())}}var g=0;var h=c-d;if($.ig.util.isNaN(h)||h<=0){h=1}var i;var j;var k;var l;var m=this.g().useLogarithmicScale();var n=this.g().logarithmBase();if(this.g().scaleColors()!=null){var o=new Array(this.g().scaleColors().length);var p=new Array(this.g().scaleColors().length);var q=new Array(this.g().scaleColors().length);var r=new Array(this.g().scaleColors().length);var s=new Array(this.g().scaleColors().length);var t=new Array(this.g().scaleColors().length);var u=new Array(this.g().scaleColors().length);var v=new Array(this.g().scaleColors().length);var w=new Array(this.g().scaleColors().length);var x=new Array(this.g().scaleColors().length);var y=new Array(this.g().scaleColors().length);var z=new Array(this.g().scaleColors().length);var aa=this.g().scaleColorOffsets();if(aa==null||aa.length!=this.g().scaleColors().length){aa=new Array(this.g().scaleColors().length);if(aa.length==1){aa[0]=0}else{for(var ab=0;ab<this.g().scaleColors().length;ab++){aa[ab]=ab/(this.g().scaleColors().length-1)}}}for(var ac=0;ac<this.g().scaleColors().length;ac++){o[ac]=this.g().scaleColors()[ac].l();q[ac]=this.g().scaleColors()[ac].o();s[ac]=this.g().scaleColors()[ac].n();u[ac]=this.g().scaleColors()[ac].m();if(ac<this.g().scaleColors().length-1){p[ac]=this.g().scaleColors()[ac+1].l();r[ac]=this.g().scaleColors()[ac+1].o();t[ac]=this.g().scaleColors()[ac+1].n();v[ac]=this.g().scaleColors()[ac+1].m()}else{p[ac]=this.g().scaleColors()[ac].l();r[ac]=this.g().scaleColors()[ac].o();t[ac]=this.g().scaleColors()[ac].n();v[ac]=this.g().scaleColors()[ac].m()}w[ac]=p[ac]-o[ac];x[ac]=r[ac]-q[ac];y[ac]=t[ac]-s[ac];z[ac]=v[ac]-u[ac]}for(var ad=0;ad<f;ad++){e=b[ad];if(e==0){continue}if(m){if(e<=0){e=0}else{e=Math.logBase(e,n)}}g=(e-d)/h;if(g<0){g=0}if(g>1){g=1}var ae=0;for(var af=0;af<aa.length;af++){if(aa[af]>=g){ae=af-1;break}}if(ae>aa.length-2){ae=aa.length-2}if(ae<0){ae=0}g=(g-aa[ae])/(aa[ae+1]-aa[ae]);i=$.ig.truncate(Math.floor(o[ae]+g*w[ae]));j=$.ig.truncate(Math.floor(q[ae]+g*x[ae]));k=$.ig.truncate(Math.floor(s[ae]+g*y[ae]));l=$.ig.truncate(Math.floor(u[ae]+g*z[ae]));a[4*ad]=i;a[4*ad+1]=j;a[4*ad+2]=k;a[4*ad+3]=l}}else{var ag=this.g().minimumColor().l();var ah=this.g().maximumColor().l();var ai=this.g().minimumColor().o();var aj=this.g().maximumColor().o();var ak=this.g().minimumColor().n();var al=this.g().maximumColor().n();var am=this.g().minimumColor().m();var an=this.g().maximumColor().m();var ao=ah-ag;var ap=aj-ai;var aq=al-ak;var ar=an-am;for(var as=0;as<f;as++){e=b[as];if(e==0){continue}if(m){e=Math.logBase(e,n)}g=(e-d)/h;if(g<0){g=0}if(g>1){g=1}i=$.ig.truncate(Math.floor(ag+g*ao));j=$.ig.truncate(Math.floor(ai+g*ap));k=$.ig.truncate(Math.floor(ak+g*aq));l=$.ig.truncate(Math.floor(am+g*ar));a[4*as]=i;a[4*as+1]=j;a[4*as+2]=k;a[4*as+3]=l}}},b:function(a){var b=new Array($.ig.truncate(a.width())*$.ig.truncate(a.height()));for(var c=0;c<b.length;c++){b[c]=0}return b},d:function(a){var b=new Array($.ig.truncate(a.width())*$.ig.truncate(a.height())*4);for(var c=0;c<b.length;c++){b[c]=0}return b},c:function(a,b){var c=new Array(a*a);for(var d=0;d<c.length;d++){c[d]=0}var e=a/2;var f=a/2;for(var g=0;g<a;g++){for(var h=0;h<a;h++){var i=Math.sqrt(Math.pow(g-f,2)+Math.pow(h-f,2));if(i>e){c[h*a+g]=0}else{c[h*a+g]=e-i}}}var j=0;var k=-1.7976931348623157e308;var l=1.7976931348623157e308;for(var m=0;m<a;m++){for(var n=0;n<a;n++){var o=c[n*a+m];if(o==0){continue}j+=o;k=o>k?o:k;l=o<l?o:l}}for(var p=0;p<a;p++){for(var q=0;q<a;q++){var r=c[q*a+p];if(r==0){continue}var s=(r-l)/(k-l);c[q*a+p]=.01+s*.99}}c[$.ig.truncate(f)*a+$.ig.truncate(f)]=1;return c},q:function(a,b){return $.ig.truncate(Math.floor(b*2))},z:function(){var $self=this;if(this.completedSink()==null){return}this.completedSink().onCompleted(function(){var $ret=new $$t.h;$ret.url($self.w);$ret.x($self.n);$ret.y($self.o);$ret.z($self.p);$ret.globalMinimumValue($self.g().globalMinimum());$ret.globalMaximumValue($self.g().globalMaximum());$ret.globalMaximumValueLongitude($self.j);$ret.globalMaximumValueLatitude($self.i);$ret.globalMinimumValueLongitude($self.l);$ret.globalMinimumValueLatitude($self.k);$ret.imageData($self.a);$ret.image($self.g().image());return $ret}())},i:0,j:0,k:0,l:0,_completedSink:null,completedSink:function(a){if(arguments.length===1){this._completedSink=a;return a}else{return this._completedSink}},$type:new $.ig.Type("HeatTileGeneratorWorker",$.ig.$ot)},true);$c("HeatTileGeneratorWebWorker:b","Object",{init:function(){$.ig.$op.init.call(this)},_postmessage:null,postmessage:function(a){if(arguments.length===1){this._postmessage=a;return a}else{return this._postmessage}},onmessage:function(args_){var data_=args_.data;var a=data_.cancelTile;var b=data_.z;var c=data_.y;var d=data_.x;if(a){for(var i_=0;i_<$$t.$b.b.length;i_++){var e=$$t.$b.b[i_];if(e.g().testRun()){continue}if(e.g().z()==b&&e.g().x()==d&&e.g().y()==c){var workers_=$$t.$b.b;workers_.splice(i_,1);i_--}}}var f=new $$t.n;var g=data_;if(!g["messageId"]){return}if(g["isNewData"]){var yValues_=g["yValues"];var xValues_=g["xValues"];var values_=g["values"];$$t.$b.__yValues=new Float64Array(yValues_);$$t.$b.__xValues=new Float64Array(xValues_);$$t.$b.__values=new Float64Array(values_)}var h=g["scaleColors"];var i=new Array(h.length);for(var j=0;j<h.length;j++){i[j]=$$a.$ax.u($h(h[j]["a"]),$h(h[j]["r"]),$h(h[j]["g"]),$h(h[j]["b"]))}f.scaler($$t.$b.e);f.blurRadius(g["blurRadius"]);f.maxBlurRadius(g["maxBlurRadius"]);f.useBlurRadiusAdjustedForZoom(g["useBlurRadiusAdjustedForZoom"]);f.minimumColor($$a.$ax.u($h(g["minimumColor"]["a"]),$h(g["minimumColor"]["r"]),$h(g["minimumColor"]["g"]),$h(g["minimumColor"]["b"])));f.maximumColor($$a.$ax.u($h(g["maximumColor"]["a"]),$h(g["maximumColor"]["r"]),$h(g["maximumColor"]["g"]),$h(g["maximumColor"]["b"])));f.tileViewport(new $$a.ae(0,g["tileViewport"]["left"],g["tileViewport"]["top"],g["tileViewport"]["width"],g["tileViewport"]["height"]));f.yValues($$t.$b.__yValues);f.xValues($$t.$b.__xValues);f.values($$t.$b.__values);f.minimumVisibleLatitude(g["minimumVisibleLatitude"]);f.minimumVisibleLongitude(g["minimumVisibleLongitude"]);f.maximumVisibleLatitude(g["maximumVisibleLatitude"]);f.maximumVisibleLongitude(g["maximumVisibleLongitude"]);f.z($h(g["z"]));f.x($h(g["x"]));f.y($h(g["y"]));f.window(new $$a.ae(0,g["window"]["left"],g["window"]["top"],g["window"]["width"],g["window"]["height"]));f.testRun(g["testRun"]);f.globalMinimum(g["globalMinimum"]);f.globalMaximum(g["globalMaximum"]);f.useGlobalMinMax(g["useGlobalMinMax"]);f.minimumValue(g["minimumValue"]);f.maximumValue(g["maximumValue"]);f.scaleColorOffsets(g["scaleColorOffsets"]);f.scaleColors(i);f.useLogarithmicScale(g["useLogarithmicScale"]);f.logarithmBase(g["logarithmBase"]);var k=new $$t.l(f);k._u=$h(g["messageId"]);k._h=true;k.completedSink(new $$t.c(k));var workersl_=$$t.$b.b;var worker_=k;workersl_.push(worker_)},start:function(){var workers_=$$t.$b.b;setInterval(function(){if(workers_.length>0){var worker=workers_.shift();worker.doWork();worker.completedSink(null)}},16)},$type:new $.ig.Type("HeatTileGeneratorWebWorker",$.ig.$ot)},true);$c("ITileWorkCompletedSink:m","Object",{$type:new $.ig.Type("ITileWorkCompletedSink",null)},true);$c("CompletedSinkImpl:c","Object",{a:null,init:function(a){$.ig.$op.init.call(this);this.a=a},onCompleted:function(a){var b=a;var c={};var imageData_=b.imageData();c["messageId"]=this.a._u;c["imageData"]=b.imageData()==null?null:new Uint8ClampedArray(imageData_)["buffer"];c["z"]=b.z();c["x"]=b.x();c["y"]=b.y();c["url"]=b.url();c["globalMinimumValue"]=b.globalMinimumValue();c["globalMaximumValue"]=b.globalMaximumValue();c["globalMaximumValueLongitude"]=b.globalMaximumValueLongitude();c["globalMaximumValueLatitude"]=b.globalMaximumValueLatitude();c["globalMinimumValueLongitude"]=b.globalMinimumValueLongitude();c["globalMinimumValueLatitude"]=b.globalMinimumValueLatitude();if(this.a._h&&c["imageData"]!=null){$$t.$b.postmessage()(c,[c["imageData"]])}else{$$t.$b.postmessage()(c)}},$type:new $.ig.Type("CompletedSinkImpl",$.ig.$ot,[$$t.$m.$type])},true);$c("ITileGenerator:d","Object",{$type:new $.ig.Type("ITileGenerator",null)},true);$c("TileImageCreatedEventArgs:g","EventArgs",{init:function(){$$0.$w.init.call(this)},_imageData:null,imageData:function(a){if(arguments.length===1){this._imageData=a;return a}else{return this._imageData}},_image:null,image:function(a){if(arguments.length===1){this._image=a;return a}else{return this._image}},_z:0,z:function(a){if(arguments.length===1){this._z=a;return a}else{return this._z}},_x:0,x:function(a){if(arguments.length===1){this._x=a;return a}else{return this._x}},_y:0,y:function(a){if(arguments.length===1){this._y=a;return a}else{return this._y}},_url:null,url:function(a){if(arguments.length===1){this._url=a;return a}else{return this._url}},$type:new $.ig.Type("TileImageCreatedEventArgs",$$0.$w.$type)},true);$c("HeatTileImageCreatedEventArgs:h","TileImageCreatedEventArgs",{init:function(){$$t.$g.init.call(this)},_globalMinimumValue:0,globalMinimumValue:function(a){if(arguments.length===1){this._globalMinimumValue=a;return a}else{return this._globalMinimumValue}},_globalMaximumValue:0,globalMaximumValue:function(a){if(arguments.length===1){this._globalMaximumValue=a;return a}else{return this._globalMaximumValue}},_globalMaximumValueLongitude:0,globalMaximumValueLongitude:function(a){if(arguments.length===1){this._globalMaximumValueLongitude=a;return a}else{return this._globalMaximumValueLongitude}},_globalMaximumValueLatitude:0,globalMaximumValueLatitude:function(a){if(arguments.length===1){this._globalMaximumValueLatitude=a;return a}else{return this._globalMaximumValueLatitude}},_globalMinimumValueLongitude:0,globalMinimumValueLongitude:function(a){if(arguments.length===1){this._globalMinimumValueLongitude=a;return a}else{return this._globalMinimumValueLongitude}},_globalMinimumValueLatitude:0,globalMinimumValueLatitude:function(a){if(arguments.length===1){this._globalMinimumValueLatitude=a;return a}else{return this._globalMinimumValueLatitude}},$type:new $.ig.Type("HeatTileImageCreatedEventArgs",$$t.$g.$type)},true);$c("TileImageZoomChangingEventArgs:i","EventArgs",{init:function(){$$0.$w.init.call(this)},_z:0,z:function(a){if(arguments.length===1){this._z=a;return a}else{return this._z}},_x:0,x:function(a){if(arguments.length===1){this._x=a;return a}else{return this._x}},_y:0,y:function(a){if(arguments.length===1){this._y=a;return a}else{return this._y}},$type:new $.ig.Type("TileImageZoomChangingEventArgs",$$0.$w.$type)},true);$c("HeatTileGenerator:k","Object",{m:null,bz:null,l:null,init:function(){this.m=new $$t.q;this.bz=new $$a.ae(0,0,0,256,256);this.l=new $$t.o;this.bw=new $$a.ax;this.bv=new $$a.ax;this.b=null;this.a=null;this.am=NaN;this.ao=NaN;this.an=NaN;this.al=10;this.t=true;this.a0=null;this.ax=null;this.ad=NaN;this.ag=NaN;this.aw={};this.au=-1;this.ay={};this.z=new $$4.h(String,$$6.$u.$type.specialize(Number,Number),0);this.aa=new $$4.h(String,$$4.$x.$type.specialize($$0.$c.$type),0);this.ab=new $$4.x($$0.$c.$type,0);this.o=false;$.ig.$op.init.call(this);this.m=new $$t.q},e:null,yValues:function(a){if(arguments.length===1){var b=this.e;this.e=a;if(this.e!=b){this.br("YValues",b,this.e)}return a}else{return this.e}},d:null,xValues:function(a){if(arguments.length===1){var b=this.d;this.d=a;if(this.d!=b){this.br("XValues",b,this.d)}return a}else{return this.d}},c:null,values:function(a){if(arguments.length===1){var b=this.c;this.c=a;if(this.c!=b){this.br("Values",b,this.c)}return a}else{return this.c}},bw:null,minimumColor:function(a){if(arguments.length===1){var b=this.bw;this.bw=a;if($$a.$ax.d(this.bw,b)){this.br("MinimumColor",b,this.bw)}return a}else{return this.bw}},bv:null,maximumColor:function(a){if(arguments.length===1){var b=this.bv;this.bv=a;if($$a.$ax.d(this.bv,b)){this.br("MaximumColor",b,this.bv)}return a}else{return this.bv}},b:null,scaleColors:function(a){if(arguments.length===1){var b=this.b;this.b=a;if(this.b!=b){this.br("ScaleColors",b,this.b)}return a}else{return this.b}},a:null,scaleColorOffsets:function(a){if(arguments.length===1){var b=this.a;this.a=a;if(this.a!=b){this.br("ScaleColorOffsets",b,this.a)}return a}else{return this.a}},ac:0,blurRadius:function(a){if(arguments.length===1){var b=this.ac;this.ac=a;if(this.ac!=b){this.br("BlurRadius",b,this.ac)}return a}else{return this.ac}},am:0,maxBlurRadius:function(a){if(arguments.length===1){var b=this.am;this.am=a;if(this.am!=b){this.br("MaxBlurRadius",b,this.am)}return a}else{return this.am}},p:false,useBlurRadiusAdjustedForZoom:function(a){if(arguments.length===1){var b=this.p;this.p=a;if(this.p!=b){this.br("UseBlurRadiusAdjustedForZoom",b,this.p)}return a}else{return this.p}},q:false,useGlobalMinMax:function(a){if(arguments.length===1){var b=this.q;this.q=a;if(this.q!=b){this.br("UseGlobalMinMax",b,this.q)}return a}else{return this.q}},r:false,useGlobalMinMaxAdjustedForZoom:function(a){if(arguments.length===1){var b=this.r;this.r=a;if(this.r!=b){this.br("UseGlobalMinMaxAdjustedForZoom",b,this.r)}return a}else{return this.r}},ao:0,minimumValue:function(a){if(arguments.length===1){var b=this.ao;this.ao=a;if(this.ao!=b){this.br("MinimumValue",b,this.ao)}return a}else{return this.ao}},an:0,maximumValue:function(a){if(arguments.length===1){var b=this.an;this.an=a;if(this.an!=b){this.br("MaximumValue",b,this.an)}return a}else{return this.an}},al:0,logarithmBase:function(a){if(arguments.length===1){var b=this.al;this.al=a;if(this.al!=b){this.br("LogarithmBase",b,this.al)}return a}else{return this.al}},s:false,useLogarithmicScale:function(a){if(arguments.length===1){var b=this.s;this.s=a;if(this.s!=b){this.br("UseLogarithmicScale",b,this.s)}return a}else{return this.s}},t:false,useWebWorkers:function(a){if(arguments.length===1){var b=this.t;this.t=a;if(this.t!=b){this.br("UseWebWorkers",b,this.t)}return a}else{return this.t}},a0:null,webWorkerScriptPath:function(a){if(arguments.length===1){var b=this.a0;this.a0=a;if(this.a0!=b){this.br("WebWorkerScriptPath",b,this.a0)}return a}else{return this.a0}},ax:null,webWorkerInstance:function(a){if(arguments.length===1){var b=this.ax;this.ax=a;if(this.ax!=b){this.br("WebWorkerInstance",b,this.ax)}return a}else{return this.ax}},destroy:function(){this.e=null;this.d=null;this.c=null;this.l.w()},br:function(a,b,c){this.bs(a,b,c)},bs:function(a,b,c){switch(a){case"XValues":case"YValues":case"Values":this.bq();break;case"UseWebWorkers":this.l.e(this.useWebWorkers());break;case"WebWorkerScriptPath":this.l.p(this.webWorkerScriptPath());break;case"WebWorkerInstance":this.l.n(this.webWorkerInstance());break}},ad:0,ag:0,aw:null,getTile:function(a,b,c,d,e,f,g){this.getTile1(a,b,c,d,e,f,g,false)},au:0,ay:null,ak:0,aj:0,z:null,aa:null,ah:0,ai:0,ae:0,af:0,n:false,ab:null,getTile1:function(a,b,c,d,e,f,g,h){var $self=this;var i=NaN;var j=NaN;if(!h&&this.useGlobalMinMax()&&($.ig.util.isNaN(this.ag)||$.ig.util.isNaN(this.ad))){var k=false;if(($.ig.util.isNaN(this.ag)||$.ig.util.isNaN(this.ad))&&!this.n){k=true;this.n=true}else{this.ab.add(function(){$self.bm(a,b,c,h,j,i,d,e,f,g)});return}if(k){var l=1.7976931348623157e308;var m=-1.7976931348623157e308;var n=0;var o=0;var p=0;var q=0;this.getTile1(0,0,0,function(r,s){var t=s;l=t.globalMinimumValue();m=t.globalMaximumValue();n=t.globalMinimumValueLongitude();o=t.globalMinimumValueLatitude();p=t.globalMaximumValueLongitude();q=t.globalMaximumValueLatitude();var u=new $$a.ae(0,0,0,1,1);var v=$self.bz;i=l;j=m;var w=new $$4.x($$0.$c.$type,0);$self.ag=i;$self.ad=j;$self.ah=o;$self.ai=n;$self.ae=q;$self.af=p;for(var x=0;x<$self.ab.count();x++){w.add($self.ab.__inner[x])}$self.ab.clear();$self.bm(a,b,c,h,j,i,d,e,f,g);for(var y=0;y<w.count();y++){w.__inner[y]()}},function(r,s){},function(r,s){},g,true);return}else{i=this.ag;j=this.ad}}else{i=this.ag;j=this.ad}this.bm(a,b,c,h,j,i,d,e,f,g)},cancelTile:function(a,b,c){this.l.s(a,b,c)},o:false,bm:function(a,b,c,d,e,f,g,h,i,j){var $self=this;this.bn(a,b,c,d,i,function(){if($self.useGlobalMinMaxAdjustedForZoom()&&!d){if(a>0&&$self.z.containsKey(a.toString())){var k=$self.z.item(a.toString());e=k._c;f=k._d}}var l=$self.b0(a,b,c);var m=new $$t.n;m.window(l);m.z(a);m.x(b);m.y(c);m.globalMinimum(f);m.globalMaximum(e);m.useGlobalMinMax($self.useGlobalMinMax());m.minimumValue($self.minimumValue());m.maximumValue($self.maximumValue());m.useLogarithmicScale($self.useLogarithmicScale());m.logarithmBase($self.logarithmBase());if(m.logarithmBase()<=0){m.logarithmBase(10)}m.tileViewport($self.bz);m.maximumColor($self.maximumColor());m.minimumColor($self.minimumColor());m.scaler($self.m);m.values($self.c);m.blurRadius($self.blurRadius());if(m.blurRadius()<=0){m.blurRadius(1)}m.useBlurRadiusAdjustedForZoom($self.useBlurRadiusAdjustedForZoom());m.maxBlurRadius($self.maxBlurRadius());if(m.maxBlurRadius()<=0){m.maxBlurRadius(1)}m.values($self.values());m.scaleColors($self.scaleColors());m.scaleColorOffsets($self.scaleColorOffsets());m.minimumVisibleLatitude($self.m.i(l,$self.bz));m.maximumVisibleLatitude($self.m.g(l,$self.bz));m.minimumVisibleLongitude($self.m.j(l,$self.bz));m.maximumVisibleLongitude($self.m.h(l,$self.bz));m.yValues($self.e);m.xValues($self.d);if($self.c==null&&$self.e!=null){$self.c=new Array($self.e.length);for(var n=0;n<$self.e.length;n++){$self.c[n]=1}m.values($self.c)}if(!$self.o){$self.o=true;m.isNewData(true)}m.image(j);m.testRun(d);$self.l.y(m,function(o,p){p.url($self.a2(p.imageData()));p.imageData($self.f(p.imageData()));g($self,p)},h)})},bn:function(a,b,c,d,e,f){var g=false;g=this.au!=a;if(!g||d){f();return}var h=false;var i=false;if(a!=this.au){if(this.z.containsKey(a.toString())&&!$.ig.util.isNaN(this.z.item(a.toString())._c)&&!$.ig.util.isNaN(this.z.item(a.toString())._d)){this.au=a;e(this,function(){var $ret=new $$t.i;$ret.z(a);$ret.x(b);$ret.y(c);return $ret}());h=true}else if(this.z.containsKey(a.toString())){if(a>0&&this.useGlobalMinMaxAdjustedForZoom()){var j;if(this.aa.containsKey(a.toString())){j=this.aa.item(a.toString())}else{j=new $$4.x($$0.$c.$type,0);this.aa.add(a.toString(),j)}j.add(f)}}else{if(a>0&&this.useGlobalMinMaxAdjustedForZoom()){this.z.add(a.toString(),new $$6.u(Number,Number,NaN,NaN));i=true}}}if(i){if(a>0&&this.useGlobalMinMaxAdjustedForZoom()){this.bt(a,f)}}if(h){f()}},a2:function(a){if(a==null){return null}var b=$("<canvas></canvas>");b.attr("width","256");b.attr("height","256");var c=b[0].getContext("2d");var d=c.getImageData(0,0,256,256);var e=d.data;var f=e.length/4;for(var g=0;g<f;g++){var h=a[g*4];var i=a[g*4+1];var j=a[g*4+2];var k=a[g*4+3];e[g*4]=i;e[g*4+1]=j;e[g*4+2]=k;e[g*4+3]=h}c.putImageData(d,0,0);var ele_=b[0];return ele_.toDataURL()},f:function(a){if(a==null){return null}return a},bt:function(a,b){var $self=this;var c=0;var d=0;var e=0;var f=0;var g=new $$a.ae(0,0,0,256*Math.pow(2,a),256*Math.pow(2,a));var h=new $$a.ae(0,0,0,1,1);var i=this.m.s(this.af,h,g);var j=this.m.r(this.ae,h,g);var k=this.m.s(this.ai,h,g);var l=this.m.r(this.ah,h,g);c=$.ig.truncate(Math.floor(k/256));d=$.ig.truncate(Math.floor(l/256));e=$.ig.truncate(Math.floor(i/256));f=$.ig.truncate(Math.floor(j/256));var m=0;var n=0;this.getTile1(a,c,d,function(o,p){var q=p;m=q.globalMinimumValue();n=q.globalMaximumValue();if(e!=c&&f!=d){$self.getTile1(a,e,f,function(r,s){var t=s;n=t.globalMaximumValue();$self.bu(a,n,m,b)},function(r,s){},function(r,s){},null,true)}else{$self.bu(a,n,m,b)}},function(o,p){},function(o,p){},null,true)},bu:function(a,b,c,d){if(b<this.aj){b=this.aj}if($.ig.util.isNaN(c)||c>this.ak){c=this.ak}var e=new $$4.x($$0.$c.$type,0);this.z.item(a.toString(),new $$6.u(Number,Number,b,c));if(this.aa.containsKey(a.toString())){var f=this.aa.item(a.toString());for(var g=0;g<f.count();g++){e.add(f.__inner[g])}}this.aa.remove(a.toString());this.au=a;d();for(var h=0;h<e.count();h++){e.__inner[h]()}},b0:function(a,b,c){var d=$.ig.truncate(Math.pow(2,a))*256;var e=b*256/d;var f=c*256/d;var g=256/d;var h=256/d;return new $$a.ae(0,e,f,g,h)},bq:function(){var a=-1.7976931348623157e308;var b=1.7976931348623157e308;if(this.c!=null){for(var c=0;c<this.c.length;c++){var d=this.c[c];a=d>a?d:a;b=d<b?d:b}}var e=this.ak=b*.01;this.aj=a;this.o=false},$type:new $.ig.Type("HeatTileGenerator",$.ig.$ot,[$$t.$d.$type])},true);$c("TileWorkSettings:n","Object",{init:function(){this._minimumColor=new $$a.ax;this._maximumColor=new $$a.ax;$.ig.$op.init.call(this)},_scaler:null,scaler:function(a){if(arguments.length===1){this._scaler=a;return a}else{return this._scaler}},_blurRadius:0,blurRadius:function(a){if(arguments.length===1){this._blurRadius=a;return a}else{return this._blurRadius}},_maxBlurRadius:0,maxBlurRadius:function(a){if(arguments.length===1){this._maxBlurRadius=a;return a}else{return this._maxBlurRadius}},_useBlurRadiusAdjustedForZoom:false,useBlurRadiusAdjustedForZoom:function(a){if(arguments.length===1){this._useBlurRadiusAdjustedForZoom=a;return a}else{return this._useBlurRadiusAdjustedForZoom}},_minimumColor:null,minimumColor:function(a){if(arguments.length===1){this._minimumColor=a;return a}else{return this._minimumColor}},_maximumColor:null,maximumColor:function(a){if(arguments.length===1){this._maximumColor=a;return a}else{return this._maximumColor}},_tileViewport:null,tileViewport:function(a){if(arguments.length===1){this._tileViewport=a;return a}else{return this._tileViewport}},_yValues:null,yValues:function(a){if(arguments.length===1){this._yValues=a;return a}else{return this._yValues}},_xValues:null,xValues:function(a){if(arguments.length===1){this._xValues=a;return a}else{return this._xValues}},_values:null,values:function(a){if(arguments.length===1){this._values=a;return a}else{return this._values}},_isNewData:false,isNewData:function(a){if(arguments.length===1){this._isNewData=a;return a}else{return this._isNewData}},_minimumVisibleLatitude:0,minimumVisibleLatitude:function(a){if(arguments.length===1){this._minimumVisibleLatitude=a;return a}else{return this._minimumVisibleLatitude}},_maximumVisibleLatitude:0,maximumVisibleLatitude:function(a){if(arguments.length===1){this._maximumVisibleLatitude=a;return a}else{return this._maximumVisibleLatitude}},_minimumVisibleLongitude:0,minimumVisibleLongitude:function(a){if(arguments.length===1){this._minimumVisibleLongitude=a;return a}else{return this._minimumVisibleLongitude}},_maximumVisibleLongitude:0,maximumVisibleLongitude:function(a){if(arguments.length===1){this._maximumVisibleLongitude=a;return a}else{return this._maximumVisibleLongitude}},_z:0,z:function(a){if(arguments.length===1){this._z=a;return a}else{return this._z}},_x:0,x:function(a){if(arguments.length===1){this._x=a;return a}else{return this._x}},_y:0,y:function(a){if(arguments.length===1){this._y=a;return a}else{return this._y}},_window:null,window:function(a){if(arguments.length===1){this._window=a;return a}else{return this._window}},_testRun:false,testRun:function(a){if(arguments.length===1){this._testRun=a;return a}else{return this._testRun}},_globalMinimum:0,globalMinimum:function(a){if(arguments.length===1){this._globalMinimum=a;return a}else{return this._globalMinimum}},_globalMaximum:0,globalMaximum:function(a){if(arguments.length===1){this._globalMaximum=a;return a}else{return this._globalMaximum}},_useGlobalMinMax:false,useGlobalMinMax:function(a){if(arguments.length===1){this._useGlobalMinMax=a;return a}else{return this._useGlobalMinMax}},_minimumValue:0,
minimumValue:function(a){if(arguments.length===1){this._minimumValue=a;return a}else{return this._minimumValue}},_maximumValue:0,maximumValue:function(a){if(arguments.length===1){this._maximumValue=a;return a}else{return this._maximumValue}},_scaleColors:null,scaleColors:function(a){if(arguments.length===1){this._scaleColors=a;return a}else{return this._scaleColors}},_scaleColorOffsets:null,scaleColorOffsets:function(a){if(arguments.length===1){this._scaleColorOffsets=a;return a}else{return this._scaleColorOffsets}},_useLogarithmicScale:false,useLogarithmicScale:function(a){if(arguments.length===1){this._useLogarithmicScale=a;return a}else{return this._useLogarithmicScale}},_logarithmBase:0,logarithmBase:function(a){if(arguments.length===1){this._logarithmBase=a;return a}else{return this._logarithmBase}},_image:null,image:function(a){if(arguments.length===1){this._image=a;return a}else{return this._image}},flatten:function(){var minA_=this.minimumColor().l();var minR_=this.minimumColor().o();var minG_=this.minimumColor().n();var minB_=this.minimumColor().m();var maxA_=this.maximumColor().l();var maxR_=this.maximumColor().o();var maxG_=this.maximumColor().n();var maxB_=this.maximumColor().m();var scaleColors_=null;if(this.scaleColors()!=null){scaleColors_=new Array(this.scaleColors().length);for(var a=0;a<this.scaleColors().length;a++){var a_=this.scaleColors()[a].l();var r_=this.scaleColors()[a].o();var g_=this.scaleColors()[a].n();var b_=this.scaleColors()[a].m();var color_={a:a_,r:r_,g:g_,b:b_};scaleColors_[a]=color_}}return{blurRadius:this.blurRadius(),maxBlurRadius:this.maxBlurRadius(),useBlurRadiusAdjustedForZoom:this.useBlurRadiusAdjustedForZoom(),minimumColor:{a:this.minimumColor().a(),r:this.minimumColor().r(),g:this.minimumColor().g(),b:this.minimumColor().b()},maximumColor:{a:this.maximumColor().a(),r:this.maximumColor().r(),g:this.maximumColor().g(),b:this.maximumColor().b()},tileViewport:{left:this.tileViewport().left(),top:this.tileViewport().top(),width:this.tileViewport().width(),height:this.tileViewport().height()},yValues:this.yValues(),xValues:this.xVAlues(),values:this.values(),isNewData:this.isNewData(),minimumVisibleLatitude:this.minimumVisibleLatitude(),minimumVisibleLongitude:this.minimumVisibleLongitude(),maximumVisibleLatitude:this.maximumVisibleLatitude(),maximumVisibleLongitude:this.maximumVisibleLongitude(),z:this.z(),x:this.x(),y:this.y(),window:{left:this.window().left(),top:this.window().top(),width:this.window().width(),height:this.window().height()},testRun:this.testRun(),globalMinimum:this.globalMinimum(),globalMaximum:this.globalMaximum(),useGlobalMinMax:this.useGlobalMinMax(),minimumValue:this.minimumValue(),maximumValue:this.maximumValue(),scaleColorOffsets:this.scaleColorOffsets(),scaleColors:scaleColors_,useLogarithmicScale:this.useLogarithmicScale(),logarithmBase:this.logarithmBase()}},$type:new $.ig.Type("TileWorkSettings",$.ig.$ot)},true);$c("HeatTileGeneratorWorkerManager:o","Object",{init:function(){this.b=true;this.o=null;this.k=null;this._supportsTransferable=false;this.d=false;this._worker=null;this.a=false;this.j=0;this.g=new $$4.h(String,$$t.$n.$type,0);this.h=new $$4.h(String,$$t.$f.$type,0);this.i=new $$4.v($$t.$l.$type);this.f=new $$4.h(String,$$4.$x.$type.specialize($$4.$w.$type.specialize($$t.$l.$type)),0);$.ig.$op.init.call(this)},b:false,e:function(a){if(arguments.length===1){this.b=a;return a}else{return this.b}},o:null,p:function(a){if(arguments.length===1){this.o=a;return a}else{return this.o}},k:null,n:function(a){if(arguments.length===1){this.k=a;return a}else{return this.k}},_supportsTransferable:false,d:false,_worker:null,a:false,u:function(){if(!this.a){this.a=true;if(window.Worker){this.d=true}if(this.d&&this.e()){this.v();var test=new ArrayBuffer(1);this._worker.postMessage(test,[test]);if(test.byteLength==0){this._supportsTransferable=true}}if(!this._supportsTransferable){this.b=false}}},v:function(){if(this.p()==null&&this.n()==null){throw new Error("HeatTileGenerator wants to use web workers, but webWorkerScriptPath and webWorkerInstance were not specified. Either specify the path, an instance, or set allowWebWorkers to false")}if(this.n()!=null){this._worker=this.n()}else{var path_=this.p();this._worker=new Worker(path_)}this._worker.postMessage=this._worker.webkitPostMessage||this._worker.postMessage;var onMessage_=this.z.runOn(this);this._worker.onmessage=onMessage_},z:function(args_){var data_=args_.data;var a=new $$t.h;a.imageData(data_.imageData==null?null:new Uint8ClampedArray(data_.imageData));a.z(data_.z);a.x(data_.x);a.y(data_.y);a.url(data_.url);a.globalMinimumValue(data_.globalMinimumValue);a.globalMaximumValue(data_.globalMaximumValue);a.globalMaximumValueLongitude(data_.globalMaximumValueLongitude);a.globalMaximumValueLatitude(data_.globalMaximumValueLatitude);a.globalMinimumValueLongitude(data_.globalMinimumValueLongitude);a.globalMinimumValueLatitude(data_.globalMinimumValueLatitude);var b=data_.messageId.toString();if(!this.g.containsKey(b)){return}var c=this.g.item(b);var d=this.h.item(b);this.g.remove(b);this.h.remove(b);a.image(c.image());d(this,a)},x:function(){this.u();if(this.e()&&this._worker==null){this.v()}if(!this.e()&&this._worker!=null){this._worker.terminate();this._worker.onmessage=null;this._worker=null}},toDoubleArray:function(arr_){return new Float64Array(arr_).buffer},j:0,g:null,h:null,r:function(a,b,c){this.j++;if(this.j>=2147483647){this.j=1}this.g.add(this.j.toString(),a);this.h.add(this.j.toString(),b);var messageId_=this.j;var innerSettings_=a.flatten();innerSettings_.messageId=messageId_;innerSettings_.transferableSupported=this._supportsTransferable;if(a.isNewData()){innerSettings_.latitudes=this.toDoubleArray(innerSettings_.latitudes);innerSettings_.longitudes=this.toDoubleArray(innerSettings_.longitudes);innerSettings_.values=this.toDoubleArray(innerSettings_.values)}else{innerSettings_.latitudes=null;innerSettings_.longitudes=null;innerSettings_.values=null}if(this._supportsTransferable&&a.isNewData()){this._worker.postMessage(innerSettings_,[innerSettings_.latitudes,innerSettings_.longitudes,innerSettings_.values])}else{this._worker.postMessage(innerSettings_)}},t:function(z_,x_,y_){var cancelMsg_={cancelTile:true,z:z_,x:x_,y:y_};this._worker.postMessage(cancelMsg_)},y:function(a,b,c){this.x();if(this.e()){this.r(a,b,c)}else{this.q(a,b,c)}},i:null,f:null,aa:function(){var $self=this;if(this.i.c()!=null){var a=this.i.c();this.i.h(a);var b=a._c.g();if(this.f.containsKey(b.z()+"_"+b.x()+"_"+b.y())){var c=this.f.item(b.z()+"_"+b.x()+"_"+b.y());c.remove(a);if(c.count()==0){this.f.remove(b.z()+"_"+b.x()+"_"+b.y())}}a._c.doWork()}if(this.i.c()!=null){window.setTimeout(function(){$self.aa()},16)}},q:function(a,b,c){var $self=this;{var d=new $$t.l(a);d.completedSink(new $$t.p(this,b));this.i.f(d);var e;var f=d.g().z()+"_"+d.g().x()+"_"+d.g().y();if(this.f.containsKey(f)){e=this.f.item(f)}else{e=new $$4.x($$4.$w.$type.specialize($$t.$l.$type),0);this.f.add(f,e)}e.add(this.i.d());window.setTimeout(function(){$self.aa()},16)}},w:function(){if(this._worker!=null){this._worker.terminate();this._worker=null}this.g.clear();this.h.clear()},s:function(a,b,c){this.x();if(this.e()){this.t(a,b,c)}else{if(this.f.containsKey(a+"_"+b+"_"+c)){var d=this.f.item(a+"_"+b+"_"+c);for(var e=d.count()-1;e>=0;e--){var f=d.__inner[e];if(f._c.g().testRun()){continue}d.removeAt(e);var g=f._c;this.i.h(f);g.completedSink(null)}}}},$type:new $.ig.Type("HeatTileGeneratorWorkerManager",$.ig.$ot)},true);$c("TileWorkCompletedSink:p","Object",{a:null,b:null,init:function(a,b){$.ig.$op.init.call(this);this.a=a;this.b=b},onCompleted:function(a){this.b(this.a,a)},$type:new $.ig.Type("TileWorkCompletedSink",$.ig.$ot,[$$t.$m.$type])},true);$c("ScalerVisibleBounds:r","Object",{init:function(a,b,c,d){$.ig.$op.init.call(this);this._b=a;this._d=b;this._c=c;this._a=d},_d:0,_a:0,_c:0,_b:0,$type:new $.ig.Type("ScalerVisibleBounds",$.ig.$ot)},true);$c("Triangle:ax","Object",{init:function(){$.ig.$op.init.call(this)},v1:0,v2:0,v3:0,$type:new $.ig.Type("Triangle",$.ig.$ot)},true);$c("HalfEdge:ay","Object",{init:function(a,b){$.ig.$op.init.call(this);this._a=a;this._b=b},_a:0,_b:0,$type:new $.ig.Type("HalfEdge",$.ig.$ot)},true);$c("HalfEdgeSet:az","Object",{init:function(){$.ig.$op.init.call(this);this.b=new $$4.h($$t.$ay.$type,$.ig.$op.$type,2,new $$t.a0)},getEnumerator:function(){return this.b.keys().getEnumerator()},add:function(a){this.b.add(a,null)},remove:function(a){this.b.remove(a)},clear:function(){this.b.clear()},count:function(){return this.b.count()},contains:function(a){return this.b.containsKey(a)},b:null,$type:new $.ig.Type("HalfEdgeSet",$.ig.$ot,[$$0.$bw.$type.specialize($$t.$ay.$type)])},true);$c("EdgeComparer:a0","Object",{init:function(){$.ig.$op.init.call(this)},equalsC:function(a,b){return a._a==b._a&&a._b==b._b||a._a==b._b&&a._b==b._a},getHashCodeC:function(a){return 65536*Math.max(a._a,a._b)+Math.min(a._a,a._b)},$type:new $.ig.Type("EdgeComparer",$.ig.$ot,[$$0.$by.$type.specialize($$t.$ay.$type)])},true);$c("PointTester:a1","Object",{init:function(){$.ig.$op.init.call(this)},c:function(a,b,c,d,e,f,g,h){var i=Math.abs(d-f);var j=Math.abs(f-h);var k=0;var l=0;if(i==0&&j==0){return false}if(i==0&&j!=0){k=(e+c)/2;l=-(g-e)/(h-f)*(k-(e+g)/2)+(f+h)/2}if(i!=0&&j==0){k=(g+e)/2;l=-(e-c)/(f-d)*(k-(c+e)/2)+(d+f)/2}if(i!=0&&j!=0){var m=-(e-c)/(f-d);var n=-(g-e)/(h-f);var o=(c+e)/2;var p=(e+g)/2;var q=(d+f)/2;var r=(f+h)/2;k=(m*o-n*p+r-q)/(m-n);l=i>j?m*(k-o)+q:n*(k-p)+r}var s=e-k;var t=f-l;var u=s*s+t*t;s=a-k;t=b-l;var v=s*s+t*t;this.b=v<=u;this.a=k<a&&(a-k)*(a-k)>u;return true},a:false,b:false,$type:new $.ig.Type("PointTester",$.ig.$ot)},true);$c("PointComparer:a2","Object",{init:function(){$.ig.$op.init.call(this)},equalsC:function(a,b){return a.__x==b.__x&&a.__y==b.__y},getHashCodeC:function(a){return a.__x^a.__y},$type:new $.ig.Type("PointComparer",$.ig.$ot,[$$0.$by.$type.specialize($$a.$y.$type)])},true);$c("TriangulationStatusEventArgs:a4","EventArgs",{_currentStatus:0,currentStatus:function(a){if(arguments.length===1){this._currentStatus=a;return a}else{return this._currentStatus}},init:function(a){$$0.$w.init.call(this);this.currentStatus(a)},$type:new $.ig.Type("TriangulationStatusEventArgs",$$0.$w.$type)},true);$c("Triangulator:a5","DependencyObject",{o:0,l:null,m:null,init:function(a,b,c){this.p=0;$$a.$r.init.call(this);this.o=a;this.l=b;this.m=c},y:function(){{this.v();if(this._k!=null){this._k.c=true}this.u()}},x:function(){{this.v();if(this._k!=null){this._k.c=false}this.u()}},v:function(){var a=this.o;var b=this.l;var c=this.m;var d=new $$4.x($$t.$ax.$type,0);var e=function(){var $ret=new $$4.x($$0.$aw.$type,0);$ret.capacity(a);return $ret}();var f=new $$4.q($$a.$y.$type,2,new $$t.a2);for(var g=0;g<a;++g){var h=b.item(g),i=c.item(g);if($.ig.util.isNaN(h)||$.ig.util.isNaN(i)||Number.isInfinity(h)||Number.isInfinity(i)){continue}var j={__x:h,__y:i,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName};if(f.contains(j)){continue}f.add(j);e.add(g)}a=e.count();if(a>=3){var k=function(l,m){if(b.item(l)<b.item(m)){return-1}else if(b.item(l)>b.item(m)){return 1}if(c.item(l)<c.item(m)){return-1}else if(c.item(l)>c.item(m)){return 1}return 0};e.sort2(k);var l=b.item(e.__inner[0]);var m=b.item(e.__inner[a-1]);var n=c.item(e.__inner[0]);var o=n;for(var p=1;p<a;p++){var q=c.item(e.__inner[p]);if($.ig.util.isNaN(q)){continue}n=Math.min(n,q);o=Math.max(o,q)}var r=m-l;var s=o-n;var t=Math.max(r,s);var u=(m+l)/2;var v=(o+n)/2;var w={__x:u-20*t,__y:v-t,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName};var x={__x:u,__y:v+20*t,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName};var y={__x:u+20*t,__y:v-t,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName};var z=new $$4.v($$t.$ax.$type);var aa=new $$4.v($$t.$ax.$type);var ab=new $$t.az;var ac=new $$t.a1;z.e(function(){var $ret=new $$t.ax;$ret.v1=a;$ret.v2=a+1;$ret.v3=a+2;return $ret}());var ad=new $$t.a6;ad.j=a;ad.n=w;ad.o=x;ad.p=y;ad.f=aa;ad.a=ab;ad.h=e;ad.b=ac;ad.i=d;ad.g=z;ad.d=b;ad.e=c;var ae=1;if(a>3e3){ae=20}ad.m=$.ig.truncate(Math.ceil(a/ae));ad.l=0;ad.k=ad.m;this.p=0;this.t();this._k=ad}},t:function(){this.s()},s:function(){if(this.triangulationStatusChanged!=null){this.triangulationStatusChanged(this,new $$t.a4(this.p))}},n:function(){if(this._k==null){return null}return this._k.i},_k:null,w:function(){{if(this._k==null){return}var a=this._k;var b=this._k.j;var c=this._k.d;var d=this._k.e;var e=this._k.h;var f=this._k.n;var g=this._k.o;var h=this._k.p;var i=this._k.i;var j=this._k.g;var k=this._k.f;var l=this._k.b;var m=this._k.a;var n=this._k.l;var o=this._k.k;var p;var q;var r;var s;var t;var u;var v;var w;var x;var y;var z;var aa;for(var ab=n;ab<o;++ab){m.clear();if(ab<b){p=c.item(e.__inner[ab]);q=d.item(e.__inner[ab])}else if(ab==b){p=f.__x;q=f.__y}else if(ab==b+1){p=g.__x;q=g.__y}else{p=h.__x;q=h.__y}var ac=null;for(var ad=j.c();ad!=null;ad=ac){ac=ad.a;aa=ad._c;r=aa.v1;u=aa.v2;x=aa.v3;if(r<b){s=c.item(e.__inner[r]);t=d.item(e.__inner[r])}else if(r==b){s=f.__x;t=f.__y}else if(r==b+1){s=g.__x;t=g.__y}else{s=h.__x;t=h.__y}if(u<b){v=c.item(e.__inner[u]);w=d.item(e.__inner[u])}else if(u==b){v=f.__x;w=f.__y}else if(u==b+1){v=g.__x;w=g.__y}else{v=h.__x;w=h.__y}if(x<b){y=c.item(e.__inner[x]);z=d.item(e.__inner[x])}else if(x==b){y=f.__x;z=f.__y}else if(x==b+1){y=g.__x;z=g.__y}else{y=h.__x;z=h.__y}l.c(p,q,s,t,v,w,y,z);if(l.a){k.f(aa);j.h(ad)}if(l.b){var ae;ae=new $$t.ay(r,u);if(m.contains(ae)){m.remove(ae)}else{m.add(ae)}ae=new $$t.ay(u,x);if(m.contains(ae)){m.remove(ae)}else{m.add(ae)}ae=new $$t.ay(x,r);if(m.contains(ae)){m.remove(ae)}else{m.add(ae)}j.h(ad)}}var ag=m.getEnumerator();while(ag.moveNext()){var af=ag.current();var ah=new $$t.ax;ah.v1=af._a;ah.v2=af._b;ah.v3=ab;j.f(ah)}}if(o==b){for(var ai=k.c();ai!=null;ai=ai.a){aa=ai._c;if(aa.v1<b&&aa.v2<b&&aa.v3<b){i.add(function(){var $ret=new $$t.ax;$ret.v1=e.__inner[aa.v1];$ret.v2=e.__inner[aa.v2];$ret.v3=e.__inner[aa.v3];return $ret}())}}for(var aj=j.c();aj!=null;aj=aj.a){aa=aj._c;if(aa.v1<b&&aa.v2<b&&aa.v3<b){i.add(function(){var $ret=new $$t.ax;$ret.v1=e.__inner[aa.v1];$ret.v2=e.__inner[aa.v2];$ret.v3=e.__inner[aa.v3];return $ret}())}}this.p=100;this.t()}else{n=o;o+=a.m;if(o>b){o=b}a.l=n;a.k=o;this.p+=$.ig.truncate(Math.floor(100/20));this.t();this.u()}}},r:function(){{this._k=null}},u:function(){{if(this._k!=null&&this._k.c){window.setTimeout(this.w.runOn(this),0)}else{this.w()}}},p:0,q:function(){return this.p},triangulationStatusChanged:null,$type:new $.ig.Type("Triangulator",$$a.$r.$type)},true);$c("TriangulatorContext:a6","Object",{init:function(){$.ig.$op.init.call(this)},j:0,d:null,e:null,i:null,n:null,o:null,p:null,g:null,f:null,h:null,a:null,b:null,m:0,l:0,k:0,c:false,$type:new $.ig.Type("TriangulatorContext",$.ig.$ot)},true);$c("TriangulationSource:a7","Object",{init:function(){$.ig.$op.init.call(this)},create:function(a,b,c){var d=new $$t.a7;var e=new Array(a);var f;var g;var h=new Array(a);var i=new Array(a);var j=0;var k=0;for(var l=0;l<a;l++){f=new $$t.a8;g=b(l);j=g.__x;k=g.__y;f.pointX=j;f.pointY=k;f.value=c(l);e[l]=f;h[l]=j;i[l]=k}d.points(e);var m=new $$t.a5(a,h,i);m.x();d.triangles(m.n());return d},loadItf:function(a){a.readBytes(5);var b=a.readInt32();var c=a.readInt32();var d=a.readInt32();var e=a.readInt32();a.readBytes(e);var f=new $$t.a7;var g=new Array(b);var h;for(var i=0;i<b;i++){h=new $$t.a8;h.pointX=a.readDouble();h.pointY=a.readDouble();h.value=a.readSingle();g[i]=h}f.points(g);var j=new Array(c);var k;for(var l=0;l<c;l++){k=new $$t.ax;k.v1=a.readInt32();k.v2=a.readInt32();k.v3=a.readInt32();j[l]=k}f.triangles(j);return f},_points:null,points:function(a){if(arguments.length===1){this._points=a;return a}else{return this._points}},_triangles:null,triangles:function(a){if(arguments.length===1){this._triangles=a;return a}else{return this._triangles}},$type:new $.ig.Type("TriangulationSource",$.ig.$ot)},true);$c("TriangulationSourcePointRecord:a8","Object",{init:function(){$.ig.$op.init.call(this)},pointX:0,pointY:0,value:0,$type:new $.ig.Type("TriangulationSourcePointRecord",$.ig.$ot)},true);$c("XamMultiScaleImageView:s","Object",{_b:null,init:function(a){var $self=this;this.g=new $$4.h($.ig.$op.$type,$$4.$x.$type.specialize($$0.$c.$type),0);this.j=new $$4.x($$t.$am.$type,0);this.i=new $$4.x($$t.$am.$type,0);this.p=-1;this.o=-1;this.au=$$a.$ae.empty();$.ig.$op.init.call(this);this._b=a;this._b.tileScheduler().l(this);this._h=new $$4.x($$a.$al.$type,0);this._b.ap=function(){var $ret=new $.ig.StackPool$1($$a.$al.$type);$ret._j=$self.at.runOn($self);$ret._b=$self.y.runOn($self);$ret._c=$self.aa.runOn($self);$ret._d=$self.z.runOn($self);return $ret}();for(var b=0;b<4;++b){this.i.add(null)}},_h:null,at:function(){return new $$a.al},y:function(a){this._h.add(a)},aa:function(a){this._h.remove(a)},z:function(a){},ao:function(a,b,c){a._n=b;a._o=c},r:function(a){for(var b=0;b<this.i.count();++b){if(a==this.i.__inner[b]){if(a.h!=null&&a.h._ac!=null){var c=a.h._ac;var d=c._c;var e=this._b.source().r(a.e+8,a.c,a.d);if(e!=null){var f=function(){var $ret=new $$t.av;$ret.uri(e.value());$ret.image(d);return $ret}();this._b.br(f)}if(this.g.containsKey(d)){var g=this.g.item(d);for(var h=0;h<g.count();h++){g.__inner[h]()}g.clear();this.g.remove(d)}}this.i.__inner[b]=null;this.q();return}}for(var i=0;i<this.j.count();++i){if(this.j.__inner[i]==a){this.j.removeAt(i);break}}},u:function(a){this.j.add(a);this.j.sort2(function(b,c){var d=0;var e=0;if(b.g!=null){d=b.g._ac._b}if(c.g!=null){e=c.g._ac._b}if(d<e){return-1}else if(d>e){return 1}return 0});this.q()},g:null,q:function(){var $self=this;var index_=-1;if(this.j.count()>0){for(var a=0;a<this.i.count();++a){if(this.i.__inner[a]==null){index_=a;break}}}if(index_>=0){this.i.__inner[index_]=this.j.__inner[0];var b=new $$t.al(this._b.source()._m,this._b.source()._k);this.i.__inner[index_].h._ac=b;var ele_=this._l.createElement("img");var c=ele_.getNativeElement();b._c=c;var self_=this;var d=new $$4.x($$0.$c.$type,0);this.g.add(c,d);d.add(ele_.listen("load",function(e){$self.ab(e,index_)}));d.add(ele_.listen("readystatechange",function(e){$self.ab(e,index_)}));d.add(ele_.listen("error",function(e){$self.ac(e,index_)}));this.j.removeAt(0);var e=this._b.source().r(this.i.__inner[index_].e+8,this.i.__inner[index_].c,this.i.__inner[index_].d);if(e==null){return}var f=e.value();var g=function(){var $ret=new $$t.at;$ret.uri(f);$ret.image(c);return $ret}();this._b.bs(g);f=g.uri();if(f!=null){c.src=f}}},ab:function(a,b){var e_=a.originalEvent;var img_=e_.target;var c=img_.complete||img_.readyState=="complete"&&e_.type=="readystatechange";if(c){this.downloadCompleted(a,b)}},ac:function(a,b){this.downloadError(a,b)},j:null,i:null,downloadError:function(a,b){var c=this.i.__inner[b];this.i.__inner[b]=null;if(c!=null&&c.h!=null&&c.h._ac!=null){var e_=a.originalEvent;var d=e_.target;if(this.g.containsKey(d)){var e=this.g.item(d);for(var f=0;f<e.count();f++){e.__inner[f]()}e.clear();this.g.remove(d)}}this.q();this.makeDirty()},downloadCompleted:function(a,b){var c=this.i.__inner[b];var d=true;if(c!=null&&c.h!=null&&c.h._ac!=null){d=false;var ele_=c.h._ac._c;if(!ele_.complete){d=true}if(ele_.width==0&&ele_.height==0){d=true}}this.i.__inner[b]=null;if(d){this.q();this.makeDirty();return}var e_=a.originalEvent;var e=e_.target;if(this.g.containsKey(e)){var f=this.g.item(e);for(var g=0;g<f.count();g++){f.__inner[g]()}f.clear();this.g.remove(e)}this._b.bl(c,c.h._ac);if(c.h!=null){this._b.b7(c)}this.q();this.makeDirty()},a:function(a,b,c,d){var e=new $$t.al(a,a);e._c=b._c;if(!b._d.isEmpty()){c+=$.ig.truncate(Math.round(b._d.left()));d+=$.ig.truncate(Math.round(b._d.top()))}e._d=new $$a.ae(0,c,d,a,a);return e},am:function(a){a._s=0},an:function(a){a._s=1},f:function(){return true},s:function(a){if(this._b.deferralHandler()!=null){this._b.deferralHandler().deferredRefresh()}else{if(this._k!=null){this._k.setTimeout(a,0)}else{window.setTimeout(a,0)}}},p:0,o:0,aq:function(){if(this.p==-1){this.p=window.setInterval(this._b.b6.runOn(this._b),50)}},as:function(){if(this.p!=-1){window.clearInterval(this.p);this.p=-1}},ap:function(){if(this.o==-1){this.o=window.setInterval(this._b.bo.runOn(this._b),50)}},ar:function(){if(this.o!=-1){window.clearInterval(this.o);this.o=-1}},t:function(){if(this.p!=-1){this.ar();this._b.bv()}},_k:null,_m:null,_c:null,ae:function(a){this._k=a;this._k.rootWrapper().setStyleProperty("position","relative");this._m=this._k.createElement("canvas");this._m.setStyleProperty("position","absolute");this._m.setStyleProperty("top","0px");this._m.setStyleProperty("left","0px");this._k.append(this._m);this._c=new $.ig.RenderingContext(new $.ig.CanvasViewRenderer,this._k.get2DCanvasContext(this._m));this.af(this._k.rootWrapper().width(),this._k.rootWrapper().height())},af:function(a,b){this._m.setAttribute("width",$.ig.truncate(a*this._b.a2()).toString());this._m.setAttribute("height",$.ig.truncate(b*this._b.a2()).toString());this._m.setStyleProperty("width",a.toString()+"px");this._m.setStyleProperty("height",b.toString()+"px");this._b._cj=new $$a.ae(0,0,0,a,b);this._b.b2()},aj:function(){this.makeDirty()},index:function(){return 0},postRender:function(){},_isDirty:false,isDirty:function(a){if(arguments.length===1){this._isDirty=a;return a}else{return this._isDirty}},makeDirty:function(){if(this._c==null){return}if(!this.isDirty()){this.isDirty(true);this._b.tileScheduler().n()}},undirty:function(a){this.isDirty(false);this.ak()},au:null,ak:function(){if(this._c==null){return}if(this._c.d()&&this._b.a2()!=1){this._c.z();this._c.aa(this._b.a2(),this._b.a2())}if(!this.au.isEmpty()){this._c.k(this.au.left(),this.au.top(),this.au.width(),this.au.height())}this.au=this._b._cj;for(var a=0;a<this._h.count();a++){var b=this._h.__inner[a];if(b._s==0){this.al(b)}}for(var c=0;c<this._h.count();c++){var d=this._h.__inner[c];if(d._s==1){this.al(d)}}if(this._c.d()&&this._b.a2()!=1){this._c.y()}this._b.bq();this._b.bt()},d:function(){var a=true;for(var b=0;b<this.i.count();b++){if(this.i.__inner[b]!=null){a=false}}return a},al:function(a){if(this._c==null){return}var b=a._ac;var c=a.__opacity;if(b==null||b._c==null){return}if(this.e(b._c)){return}if(!b._d.isEmpty()){if(b._d.width()<1||b._d.height()<1){return}this._c.n(b._c,c,b._d.left(),b._d.top(),b._d.width(),b._d.height(),Math.round(a._n+this._b._cj.left()),Math.round(a._o+this._b._cj.top()),a.width(),a.height())}else{this._c.m(b._c,c,Math.round(a._n+this._b._cj.left()),Math.round(a._o+this._b._cj.top()),a.width(),a.height())}},e:function(a){var img_=a;if(!img_.complete){return true}if(img_.width==0&&img_.height==0){return true}return false},x:function(){this.makeDirty()},ag:function(a){this._c=a;this.makeDirty()},_l:null,ah:function(a){this._l=a},ai:function(a){this._b._cj=a;this._b.b2()},preRender:function(){},isValid:function(){return true},$type:new $.ig.Type("XamMultiScaleImageView",$.ig.$ot,[$.ig.ISchedulableRender.prototype.$type])},true);$c("XBaseField:u","Object",{init:function(){$.ig.$op.init.call(this)},c:null,a:0,b:0,$type:new $.ig.Type("XBaseField",$.ig.$ot)},true);$c("ShapefileRecord:z","DependencyObject",{init:function(){$$a.$r.init.call(this);this.fieldsNames(new $$4.x(String,0));this.fieldsTypes(new $$4.x(String,0))},_shapeType:0,shapeType:function(a){if(arguments.length===1){this._shapeType=a;return a}else{return this._shapeType}},_fieldsNames:null,fieldsNames:function(a){if(arguments.length===1){this._fieldsNames=a;return a}else{return this._fieldsNames}},_fieldsTypes:null,fieldsTypes:function(a){if(arguments.length===1){this._fieldsTypes=a;return a}else{return this._fieldsTypes}},fields:null,points:null,o:function(a){if(this.propertyChanged!=null){this.propertyChanged(this,new $$0.b7(a))}},propertyChanged:null,_bounds:null,bounds:function(a){if(arguments.length===1){this._bounds=a;return a}else{return this._bounds}},$type:new $.ig.Type("ShapefileRecord",$$a.$r.$type,[$$0.$b6.$type])},true);$c("ShapefileConverter:w","DependencyObjectNotifier",{init:function(){var $self=this;this.ae=$$a.$ae.empty();$.ig.DependencyObjectNotifier.prototype.init.call(this);this.records(new $$4.f($$t.$z.$type,0));var a=this.records();a.collectionChanged=$.ig.Delegate.prototype.combine(a.collectionChanged,function(a,b){if($self.collectionChanged!=null){$self.collectionChanged($self,b)}})},worldRect:function(a){if(arguments.length===1){if($$a.$ae.l_op_Inequality(this.af,a)){var b=this.af;this.af=a;this.ab("WorldRect",b,this.af)}return a}else{return this.af}},af:null,computedWorldRect:function(a){if(arguments.length===1){if($$a.$ae.l_op_Inequality(this.ae,a)){var b=this.ae;this.ae=a;this.ab("ComputedWorldRect",b,this.ae)}return a}else{return this.ae}},ae:null,getWorldBounds:function(a){if(a&&this.computedWorldRect().isEmpty()==false){return this.computedWorldRect()}return this.worldRect()},shapeType:function(){return this.shapeHeader()._a},_shapeHeader:null,shapeHeader:function(a){if(arguments.length===1){this._shapeHeader=a;return a}else{return this._shapeHeader}},shapefileSource:function(a){if(arguments.length===1){this.h($$t.$w.shapefileSourceProperty,a);return a}else{return this.c($$t.$w.shapefileSourceProperty)}},databaseSource:function(a){if(arguments.length===1){this.h($$t.$w.databaseSourceProperty,a);return a}else{return this.c($$t.$w.databaseSourceProperty)}},ab:function(a,b,c){switch(a){case"ShapefileSource":case"DatabaseSource":if(this.shapefileSource()!=null&&this.databaseSource()!=null){this.y()}break}this.j(a)},importCompleted:null,z:function(a){if(this.importCompleted!=null){this.importCompleted(this,a)}},y:function(){var $self=this;var a=null;var b=null;var c=function(){if(a!=null&&b!=null){$self.aa(a,b);$self.z(new $$6.ae(null,false,null))}};$$b.$b.a(this.shapefileSource(),function(d){a=new $$7.c(0,d,false);c()},function(d){throw new $$0.n(1,"shape file download error: "+d)});$$b.$b.a(this.databaseSource(),function(d){b=new $$7.c(0,d,false);c()},function(d){throw new $$0.n(1,"dbf file download error: "+d)})},aa:function(a,b){this.shapeHeader($$t.$ab.a(a,b));this.worldRect(this.shapeHeader()._e);var c=a.currentPosition();var d=a.length();var e=$$a.$ae.empty();while(c<d){var f=$$t.$ab.e(this.shapeHeader(),a,b);var record_=f;var g=true;if(this.filter!=null){var h=new $$t.y;h._b=true;h._a=f;this.filter(this,h);if(!h._b){g=false}}if(g){this.records().add(f);if(e.isEmpty()){e=f.bounds()}else{e.union(f.bounds())}}c=a.currentPosition();d=a.length()}this.computedWorldRect(e.isEmpty()?this.worldRect():e)},p:null,records:function(a){if(arguments.length===1){this.p=a;return a}else{return this.p}},collectionChanged:null,indexOf:function(a){return this.p.indexOf(a)},insert:function(a,b){this.p.insert(a,b)},removeAt:function(a){this.p.removeAt(a)},item:function(a,b){if(arguments.length===2){this.p.item(a,b);return b}else{return this.p.__inner[a]}},add:function(a){this.p.add(a)},clear:function(){this.p.clear()},contains:function(a){return this.p.contains(a)},copyTo:function(a,b){this.p.copyTo(a,b)},count:function(){return this.p.count()},isReadOnly:function(){return this.p.isReadOnly()},remove:function(a){return this.p.remove(a)},getEnumerator:function(){return this.p.getEnumerator()},getEnumerator:function(){return this.p.getEnumerator()},getPointData:function(){return new $$4.x($$t.$z.$type,1,this.records())},getRecord:function(a){return this.records().__inner[a]},filter:null,$type:new $.ig.Type("ShapefileConverter",$.ig.DependencyObjectNotifier.prototype.$type,[$$0.$bz.$type.specialize($$t.$z.$type),$$4.$ac.$type])},true);$c("ShapeFilterRecordEventArgs:y","Object",{init:function(){$.ig.$op.init.call(this)},_a:null,_b:false,$type:new $.ig.Type("ShapeFilterRecordEventArgs",$.ig.$ot)},true);$c("Header:aa","Object",{init:function(){this.b=new $$4.x($$t.$u.$type,0);$.ig.$op.init.call(this)},_a:0,_e:null,d:function(){return{__x:this._e.left(),__y:this._e.top(),$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName}},c:function(){return{__x:this._e.right(),__y:this._e.bottom(),$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName}},b:null,$type:new $.ig.Type("Header",$.ig.$ot)},true);$c("ShapeFileUtil:ab","Object",{init:function(){$.ig.$op.init.call(this)},a:function(a,b){if($$t.$ab.j==null){$$t.$ab.m()}var c=new $$t.aa;var d=$$t.$ab.k(a.readInt32());if(d!=9994){throw new $$0.n(1,"Corrupt Shp file - incorrect file code")}a.readInt32();a.readInt32();a.readInt32();a.readInt32();a.readInt32();$$t.$ab.k(a.readInt32());a.readInt32();c._a=a.readInt32();var e=new $$a.y(0);var f=new $$a.y(0);e.__x=a.readDouble();e.__y=a.readDouble();f.__x=a.readDouble();f.__y=a.readDouble();a.readDouble();a.readDouble();a.readDouble();a.readDouble();c._e=new $$a.ae(0,e.__x,e.__y,f.__x-e.__x,f.__y-e.__y);if(b!=null){var g=b.readByte();if(g!=3){throw new $$0.n(1,"Corrupt Dbf file - wrong version number")}b.readByte();b.readByte();b.readByte();b.readUInt32();b.readUInt16();var h=b.readUInt16();b.readBytes(2);b.readBytes(1);b.readBytes(1);b.readBytes(4);b.readBytes(8);b.readBytes(1);b.readBytes(1);b.readBytes(2);var i=0;while(i<h-1){var j=new $$t.u;j.c=$3($$8.$a.uTF8().getString1(b.readBytes(11),0,10),"\0","");var k=$$8.$a.uTF8().getString1(b.readBytes(1),0,1).charAt(0);j.a=$$t.$ab.j.item(k);b.readBytes(4);j.b=b.readByte();b.readBytes(15);c.b.add(j);i+=j.b}if(b.readByte()!=13){throw new $$0.n(1,"Corrupt Dbf file - Missing field descriptor array terminator")}}return c},e:function(a,b,c){var d=$$t.$ab.k(b.readInt32());var e=$$t.$ab.k(b.readInt32());var f=b.readInt32();var g=null;switch(f){case 0:break;case 1:g=$$t.$ab.i(b);break;case 3:g=$$t.$ab.b(b);break;case 5:g=$$t.$ab.f(b);break;case 8:break;case 11:break;case 13:g=$$t.$ab.d(b);break;case 15:g=$$t.$ab.h(b);break;case 18:break;case 21:break;case 23:break;case 25:break;case 28:break;case 31:break;default:break}if(g==null){throw new $$0.n(1,"Corrupt Shp file - failed to read "+$$t.$t.$getName(f))}g.shapeType(f);if(c!=null){c.readBytes(1);g.fields=new $$4.h(String,$.ig.$op.$type,0);var i=a.b.getEnumerator();while(i.moveNext()){var h=i.current();g.fieldsNames().add(h.c);var j=c.readBytes(h.b);var k=$$8.$a.uTF8().getString1(j,0,h.b);switch(h.a){case 1:g.fieldsTypes().add("double");var l=parseFloat(k);if(!$.ig.util.isNaN(l)){g.fields.add(h.c,l);$$t.$ab.l(g,h.c,l)}break;case 5:g.fieldsTypes().add("float");var m=parseFloat(k);if(!$.ig.util.isNaN(m)){g.fields.add(h.c,m);$$t.$ab.l(g,h.c,m)}break;case 0:g.fieldsTypes().add("string");var n=k.trim();g.fields.add(h.c,n);$$t.$ab.l(g,h.c,n);break;case 3:g.fieldsTypes().add("date");var str_=k;var o=Date.parse(str_);g.fields.add(h.c,o);$$t.$ab.l(g,h.c,o);break;default:throw new $$0.n(1,"Unrecognized field type: "+$$t.$v.getBox(h.a))}}}return g},l:function(row_,property_,val_){if(!row_.fieldValues){row_.fieldValues={}}row_.fieldValues[property_]=val_},k:function(a){return(a&255)<<24|(a&65280)<<8|(a&16711680)>>8|$o(a,4278190080)>>24},i:function(a){var b=function(){var $ret=new $$a.y(0);$ret.x(a.readDouble());$ret.y(a.readDouble());return $ret}();return function(){var $ret=new $$t.z;$ret.bounds(new $$a.ae(3,b,$$a.$af.empty()));$ret.points=new $$4.x($$4.$x.$type.specialize($$a.$y.$type),1,[new $$4.x($$a.$y.$type,1,[b])]);return $ret}()},d:function(a){var b,c;var d=function(){var e=$$t.$ab.c(a,b,c);b=e.p1;c=e.p2;return e.ret}();a.readDouble();a.readDouble();for(var e=0;e<c;e++){a.readDouble()}a.readDouble();a.readDouble();for(var f=0;f<c;f++){a.readDouble()}return d},c:function(a,b,c){var d=new $$a.y(0);var e=function(){var $ret=new $$a.y(0);$ret.x(a.readDouble());$ret.y(a.readDouble());return $ret}();var f=function(){var $ret=new $$a.y(0);$ret.x(a.readDouble());$ret.y(a.readDouble());return $ret}();var g=new $$a.ae(0,e.__x,e.__y,f.__x-e.__x,f.__y-e.__y);b=a.readInt32();
c=a.readInt32();var h=new Array(b);for(var i=0;i<b;++i){h[i]=a.readInt32()}var j=new $$4.x($$4.$x.$type.specialize($$a.$y.$type),0);for(var k=0;k<b;++k){var l=(k<b-1?h[k+1]:c)-h[k];var m=new $$4.x($$a.$y.$type,2,l-1);for(var n=0;n<l;++n){d=new $$a.y(0);d.__x=a.readDouble();d.__y=a.readDouble();m.add(d)}if(m.count()>0){j.add(m)}}return{ret:function(){var $ret=new $$t.z;$ret.bounds(g);$ret.points=j;return $ret}(),p1:b,p2:c}},b:function(a){var b,c;return function(){var d=$$t.$ab.c(a,b,c);b=d.p1;c=d.p2;return d.ret}()},h:function(a){var b,c;var d=function(){var e=$$t.$ab.g(a,b,c);b=e.p1;c=e.p2;return e.ret}();a.readDouble();a.readDouble();for(var e=0;e<c;e++){a.readDouble()}a.readDouble();a.readDouble();for(var f=0;f<c;f++){a.readDouble()}return d},f:function(a){var b,c;return function(){var d=$$t.$ab.g(a,b,c);b=d.p1;c=d.p2;return d.ret}()},g:function(a,b,c){var d=function(){var $ret=new $$a.y(0);$ret.x(a.readDouble());$ret.y(a.readDouble());return $ret}();var e=function(){var $ret=new $$a.y(0);$ret.x(a.readDouble());$ret.y(a.readDouble());return $ret}();var f=new $$a.ae(0,d.__x,d.__y,e.__x-d.__x,e.__y-d.__y);var g=new $$a.y(0);b=a.readInt32();c=a.readInt32();var h=new Array(b);for(var i=0;i<b;++i){h[i]=a.readInt32()}var j=new $$4.x($$4.$x.$type.specialize($$a.$y.$type),0);for(var k=0;k<b;++k){var l=(k<b-1?h[k+1]:c)-h[k];var m=new $$4.x($$a.$y.$type,2,l);g=new $$a.y(0);g.__x=a.readDouble();g.__y=a.readDouble();for(var n=1;n<l;++n){g=new $$a.y(0);g.__x=a.readDouble();g.__y=a.readDouble();m.add(g)}if(m.count()>1){j.add(m)}}return{ret:function(){var $ret=new $$t.z;$ret.bounds(f);$ret.points=j;return $ret}(),p1:b,p2:c}},m:function(){$$t.$ab.j=new $$4.h($$0.$as.$type,$$t.$v.$type,0);$$t.$ab.j.item("C",0);$$t.$ab.j.item("N",1);$$t.$ab.j.item("L",2);$$t.$ab.j.item("D",3);$$t.$ab.j.item("M",4);$$t.$ab.j.item("F",5);$$t.$ab.j.item("B",6);$$t.$ab.j.item("G",7);$$t.$ab.j.item("P",8);$$t.$ab.j.item("Y",9);$$t.$ab.j.item("T",10);$$t.$ab.j.item("I",11);$$t.$ab.j.item("V",12);$$t.$ab.j.item("X",13);$$t.$ab.j.item("@",14);$$t.$ab.j.item("O",15);$$t.$ab.j.item("+",16)},staticInit:function(){$$t.$ab.m()},$type:new $.ig.Type("ShapeFileUtil",$.ig.$ot)},true);$c("XamMultiScaleTileSource:aw","DependencyObject",{init:function(a,b,c,d,e){$$a.$r.init.call(this);this.o=a;this.n=b;this._m=c;this._k=d;this._l=e},o:0,q:function(a){if(arguments.length===1){this.o=a;this.t(0,0,0,0);return a}else{return this.o}},n:0,p:function(a){if(arguments.length===1){this.n=a;this.t(0,0,0,0);return a}else{return this.n}},_m:0,_k:0,_l:0,j:null,r:function(a,b,c){var d=new $$4.x($.ig.$op.$type,0);this.s(a,b,c,d);var e=null;if(d.count()>0){e=$b($$6.$x.$type,d.__inner[0])}return e},s:function(a,b,c,d){},t:function(a,b,c,d){if(this.j!=null){this.j.invalidateTileLayer(a,b,c,d)}},$type:new $.ig.Type("XamMultiScaleTileSource",$$a.$r.$type)},true);$c("MapTileSource:ai","XamMultiScaleTileSource",{init:function(a,b,c,d,e){$$t.$aw.init.call(this,a,b,c,d,e)},$type:new $.ig.Type("MapTileSource",$$t.$aw.$type)},true);$c("ArcGISOnlineTileSource:ac","MapTileSource",{init:function(){$$t.$ai.init.call(this,2097152,2097152,256,256,0)},mapServerUri:function(a){if(arguments.length===1){this.h($$t.$ac.mapServerUriProperty,a);return a}else{return this.c($$t.$ac.mapServerUriProperty)}},isMapPublic:function(a){if(arguments.length===1){this.h($$t.$ac.isMapPublicProperty,a);return a}else{return this.c($$t.$ac.isMapPublicProperty)}},levelOfDetail:function(a){if(arguments.length===1){this.h($$t.$ac.levelOfDetailProperty,a);return a}else{return $h(this.c($$t.$ac.levelOfDetailProperty))}},userToken:function(a){if(arguments.length===1){this.h($$t.$ac.userTokenProperty,a);return a}else{return this.c($$t.$ac.userTokenProperty)}},s:function(a,b,c,d){var e=this.mapServerUri()+"/tile/{0}/{1}/{2}";var f="";if(String.isNullOrEmpty(this.mapServerUri())||this.levelOfDetail()<1||!$$6.$x.isWellFormedUriString(this.mapServerUri(),1)){return}if(!this.isMapPublic()){if(!String.isNullOrEmpty(this.userToken())){e+="?token={3}";f=this.userToken().trim()}else{return}}var g=a-8;if(g>0){var h=$5(e,[g,c,b,f]);d.add(new $$6.x(0,h))}},y:function(a,b){var c=a;if(b.f()==$$t.$ac.mapServerUriProperty){if(c.mapServerUri()!=$b(String,b.newValue())){c.mapServerUri($b(String,b.newValue()))}c.t(0,0,0,0)}if(b.f()==$$t.$ac.userTokenProperty){if(c.userToken()!=$b(String,b.newValue())){c.userToken($b(String,b.newValue()))}c.t(0,0,0,0)}if(b.f()==$$t.$ac.levelOfDetailProperty){c.q($.ig.truncate(Math.pow(2,c.levelOfDetail()-1)*256));c.p($.ig.truncate(Math.pow(2,c.levelOfDetail()-1)*256))}if(b.f()==$$t.$ac.isMapPublicProperty){c.t(0,0,0,0)}},$type:new $.ig.Type("ArcGISOnlineTileSource",$$t.$ai.$type)},true);$c("BingMapsTileSource:ad","MapTileSource",{init:function(a){if(a>0){switch(a){case 1:this.init1.apply(this,arguments);break}return}$$t.$ai.init.call(this,256<<22,256<<22,256,256,0)},init1:function(a,b,c){$$t.$ad.init.call(this,0);this.tilePath(b);this.subDomains(c)},tilePath:function(a){if(arguments.length===1){this.h($$t.$ad.tilePathProperty,a);return a}else{return this.c($$t.$ad.tilePathProperty)}},subDomains:function(a){if(arguments.length===1){this.h($$t.$ad.subDomainsProperty,a);return a}else{return this.c($$t.$ad.subDomainsProperty)}},ab:function(a,b){this.t(0,0,0,0)},w:null,cultureName:function(a){if(arguments.length===1){this.h($$t.$ad.cultureNameProperty,a);return a}else{return this.c($$t.$ad.cultureNameProperty)}},s:function(a,b,c,d){if(!this.u()){d.clear();return}if(String.isNullOrEmpty(this.tilePath())){return}a-=8;if(a>0){var e=this.y(a,b,c);var f=this.tilePath();f=$3(f,"{culture}",this.w);f=$3(f,"{quadkey}",e);var g=$$0.$aw.parseInt(e.substr(e.length-1,1));if(this.subDomains()==null||g>=this.subDomains().count()){return}f=$3(f,"{subdomain}",this.subDomains().__inner[g]);f=$3(f,"&token={token}","");d.add(new $$6.x(0,f))}},u:function(){var a=true;return a},y:function(a,b,c){var d=new $$6.aj(0);for(var e=a;e>0;--e){var f="0";var g=1<<e-1;if((b&g)!=0){(function(){var $value=f;f=$u($value.charCodeAt(0)+1);return $value})()}if((c&g)!=0){(function(){var $value=f;f=$u($value.charCodeAt(0)+1);return $value})();(function(){var $value=f;f=$u($value.charCodeAt(0)+1);return $value})()}d.h(f)}return d.toString()},aa:function(a,b){var c=a;if(b.f()==$$t.$ad.subDomainsProperty||b.f()==$$t.$ad.tilePathProperty||b.f()==$$t.$ad.cultureNameProperty){if(b.f()==$$t.$ad.subDomainsProperty){var d=$b($$4.$f.$type.specialize(String),b.oldValue());var e=$b($$4.$f.$type.specialize(String),b.newValue());if(d!=null){d.collectionChanged=$.ig.Delegate.prototype.remove(d.collectionChanged,c.ab.runOn(c))}if(e!=null){e.collectionChanged=$.ig.Delegate.prototype.combine(e.collectionChanged,c.ab.runOn(c))}}if(b.f()==$$t.$ad.cultureNameProperty){c.w=b.newValue()}c.t(0,0,0,0)}},$type:new $.ig.Type("BingMapsTileSource",$$t.$ai.$type)},true);$c("TileGeneratorTileSource:ae","MapTileSource",{init:function(){this.u="tilegen://tile/{Z}/{X}/{Y}.png";$$t.$ai.init.call(this,134217728,134217728,256,256,0)},s:function(a,b,c,d){var e=a-8;if(e>0){var f="tilegen://tile/"+e+"/"+b+"/"+c+".png";d.add(new $$6.x(0,f))}},u:null,$type:new $.ig.Type("TileGeneratorTileSource",$$t.$ai.$type)},true);$c("GetTileImageUriArgs:af","EventArgs",{init:function(a,b,c){$$0.$w.init.call(this);this.tileLevel(a);this.tilePositionX(b);this.tilePositionY(c)},_tileLevel:0,tileLevel:function(a){if(arguments.length===1){this._tileLevel=a;return a}else{return this._tileLevel}},_tilePositionX:0,tilePositionX:function(a){if(arguments.length===1){this._tilePositionX=a;return a}else{return this._tilePositionX}},_tilePositionY:0,tilePositionY:function(a){if(arguments.length===1){this._tilePositionY=a;return a}else{return this._tilePositionY}},_tileImageUri:null,tileImageUri:function(a){if(arguments.length===1){this._tileImageUri=a;return a}else{return this._tileImageUri}},$type:new $.ig.Type("GetTileImageUriArgs",$$0.$w.$type)},true);$c("CustomMapTileSource:ah","MapTileSource",{init:function(a,b,c,d,e){$$t.$ai.init.call(this,a,b,c,d,e)},s:function(a,b,c,d){var e=new $$t.af(a,b,c);this.v(e);if(e.tileImageUri()!=null){var f=new $$6.x(0,e.tileImageUri());d.add(f)}},v:function(a){if(this.getTileImageUri!=null){this.getTileImageUri(this,a)}},getTileImageUri:null,$type:new $.ig.Type("CustomMapTileSource",$$t.$ai.$type)},true);$c("OpenStreetMapTileSource:aj","MapTileSource",{u:null,init:function(){this.u="tile.openstreetmap.org/{Z}/{X}/{Y}.png";$$t.$ai.init.call(this,134217728,134217728,256,256,0);this.setTilePathUrl(this.u)},s:function(a,b,c,d){var e=a-8;if(e>0){var f=this.u;f=$3(f,"{Z}",e.toString());f=$3(f,"{X}",b.toString());f=$3(f,"{Y}",c.toString());d.add(new $$6.x(0,f))}},setTilePathUrl:function(a){if(!String.isNullOrEmpty(a)){if(a.startsWith("http://")||a.startsWith("https://")){this.u=a}else{var b="http://";b="https:"==document.location.protocol?"https://":"http://";this.u=b+a}}},$type:new $.ig.Type("OpenStreetMapTileSource",$$t.$ai.$type)},true);$c("ItfConverter:ak","DependencyObject",{init:function(){$$a.$r.init.call(this)},source:function(a){if(arguments.length===1){this.h($$t.$ak.sourceProperty,a);return a}else{return $b($$6.$x.$type,this.c($$t.$ak.sourceProperty))}},j:null,triangulationSource:function(a){if(arguments.length===1){var b=a!=this.triangulationSource();if(b){var c=this.j;this.j=a;this.t("TriangulationSource",c,this.triangulationSource())}return a}else{return this.j}},r:function(){var $self=this;var a=null;var b=function(){if(a!=null){$self.triangulationSource($$t.$a7.loadItf(a))}$self.s(new $$6.ae(null,false,null))};$$b.$b.a(this.source().value(),function(c){a=new $$7.c(0,c,false);b()},function(c){throw new $$0.n(1,"itf file download error: "+c)})},importCompleted:null,s:function(a){if(this.importCompleted!=null){this.importCompleted(this,a)}},u:function(a,b,c){switch(a){case"Source":if(this.source()!=null){this.r()}break}},t:function(a,b,c){if(this.propertyChanged!=null){this.propertyChanged(this,new $$0.b7(a))}this.u(a,b,c)},propertyChanged:null,getPointData:function(){if(this.j==null){return null}return new $$4.x($$t.$a8.$type,1,this.j.points())},getTriangleData:function(){if(this.j==null){return null}return new $$4.x($$t.$ax.$type,1,this.j.triangles())},$type:new $.ig.Type("ItfConverter",$$a.$r.$type,[$$0.$b6.$type])},true);$c("WriteableBitmap:al","Object",{init:function(a,b){$.ig.$op.init.call(this);this._b=a;this._a=b;this._d=$$a.$ae.empty()},_b:0,_a:0,_c:null,_d:null,$type:new $.ig.Type("WriteableBitmap",$.ig.$ot)},true);$c("Tile:am","Object",{init:function(){$.ig.$op.init.call(this)},c:0,d:0,e:0,h:null,g:null,b:new Date,i:function(){var a=Math.pow(2,-this.e);var b=Math.pow(2,-this.e);return new $$a.ae(0,this.c*a,this.d*b,a,b)},_a:false,_f:null,$type:new $.ig.Type("Tile",$.ig.$ot)},true);$c("IMapRenderDeferralHandler:an","Object",{$type:new $.ig.Type("IMapRenderDeferralHandler",null)},true);$c("TilePositionComparer:ao","Object",{init:function(){$.ig.$op.init.call(this)},equalsC:function(a,b){return a.c==b.c&&a.d==b.d&&a.e==b.e},getHashCodeC:function(a){var b=23;b=b*31+a.c;b=b*31+a.d;b=b*31+a.e;return b},$type:new $.ig.Type("TilePositionComparer",$.ig.$ot,[$$0.$by.$type.specialize($$t.$am.$type)])},true);$c("Pair$2:ap","Object",{$t1:null,$t2:null,init:function($t1,$t2,a,b){this.$t1=$t1;this.$t2=$t2;if(!this.hasOwnProperty("$type")){this.$type=this.$type.specialize(this.$t1,this.$t2)}$.ig.$op.init.call(this);this._a=a;this._b=b},_a:null,_b:null,$type:new $.ig.Type("Pair$2",$.ig.$ot)},true);$c("IEasingFunction:aq","Object",{$type:new $.ig.Type("IEasingFunction",null)},true);$c("XamMultiScaleImage:ar","Control",{init:function(){this.aw=new $$4.x($$t.$am.$type,0);this.au=false;this.aq=new $.ig.LRUCache$2($$t.$am.$type,$$t.$al.$type,1,2147483647,new $$t.ao);this.ax=new $$4.x($$t.$am.$type,0);this.as=false;this.az=1;$$a.$f.init.call(this);this._cj=$$a.$ae.empty();this.tileScheduler(new $.ig.CanvasRenderScheduler);this._an=new $$t.s(this);this._ab=$$t.$ar.$type;this._cg=this.viewportOrigin();this._a0=this.viewportWidth()},ap:null,_an:null,ak:null,deferralHandler:function(a){if(arguments.length===1){if(this.ak!=null){this.ak.unRegister(this)}this.ak=a;if(this.ak!=null){this.ak.register(this,this.b3.runOn(this))}return a}else{return this.ak}},source:function(a){if(arguments.length===1){this.h($$t.$ar.sourceProperty,a);return a}else{return this.c($$t.$ar.sourceProperty)}},viewportOrigin:function(a){if(arguments.length===1){this.h($$t.$ar.viewportOriginProperty,a);return a}else{return this.c($$t.$ar.viewportOriginProperty)}},_cg:null,viewportWidth:function(a){if(arguments.length===1){this.h($$t.$ar.viewportWidthProperty,a);return a}else{return this.c($$t.$ar.viewportWidthProperty)}},_a0:0,useSprings:function(a){if(arguments.length===1){this.h($$t.$ar.useSpringsProperty,a);return a}else{return this.c($$t.$ar.useSpringsProperty)}},springsEasingFunction:function(a){if(arguments.length===1){this.h($$t.$ar.springsEasingFunctionProperty,a);return a}else{return this.c($$t.$ar.springsEasingFunctionProperty)}},referer:function(a){if(arguments.length===1){this.h($$t.$ar.refererProperty,a);return a}else{return this.c($$t.$ar.refererProperty)}},ba:function(){if(!String.isNullOrEmpty(this.referer())){return this.referer()}return null},userAgent:function(a){if(arguments.length===1){this.h($$t.$ar.userAgentProperty,a);return a}else{return this.c($$t.$ar.userAgentProperty)}},bb:function(){if(!String.isNullOrEmpty(this.userAgent())){return this.userAgent()}return null},propertyChanged:null,bu:function(a,b,c){var d=new $$0.b7(a);if(this.propertyChanged!=null){this.propertyChanged(this,d)}switch(a){case"Source":if(this.source()!=null){this.source().j=this}this.b1();this.b4();this.b2();break;case"ViewportOrigin":this.b5();break;case"ViewportWidth":this.b5();break;case"UseSprings":if(!this.useSprings()){this._an.t()}break}},_a8:0,_a9:0,b4:function(){this.b8();if(this.source()!=null){this._a8=$$6.$g.toInt32(Math.logBase(this.source()._m,2));this._a9=$$6.$g.toInt32(Math.logBase(this.source().q(),2))}},invalidateTileLayer:function(a,b,c,d){this.b1();this.b4();this.b2()},ay:new Date,ch:null,a1:0,b5:function(){if(this.useSprings()){this.ay=$$0.$s.now();this.ch=this._cg;this.a1=this._a0;this._an.aq()}else{this._cg=this.viewportOrigin();this._a0=this.viewportWidth();this.b2()}},b6:function(){var a=2;var b=$$0.$s.now().getTime()-this.ay.getTime();var c=b/1e3;var d=$.ig.MathUtil.prototype.b(c/a,0,1);var e=this.springsEasingFunction()!=null?this.springsEasingFunction().ease(d):d;var f=1-e;this._a0=this.a1*f+this.viewportWidth()*e;this._cg={__x:this.ch.__x*f+this.viewportOrigin().__x*e,__y:this.ch.__y*f+this.viewportOrigin().__y*e,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName};if(d>=1){this._an.as()}else{}this.b2()},aw:null,a6:function(a,b,c){for(var d=0;d<this.aw.count();++d){if(this.aw.__inner[d].c==a&&this.aw.__inner[d].d==b&&this.aw.__inner[d].e==c){return d}}return-1},b3:function(a){var $self=this;this.au=false;this.as=false;if(this.source()==null||!this._an.f()||this._cj.width()==0||this._cj.height()==0){return}var b=$.ig.truncate(Math.ceil(this._cj.width()/this.source()._m));var c=$.ig.truncate(Math.max(1,Math.floor(-Math.logBase(this._a0/b,2))));if(c>=this._a9-8){c=this._a9-8-1}var d=$.ig.truncate(Math.round(Math.pow(2,c)));var e=this._a0;var f=this._cj.height()*e/this._cj.width();var g=this.source().q()/Math.pow(2,c);var h=this.source().p()/Math.pow(2,c);var i=Math.max($.ig.truncate(Math.floor(this._cg.__x*this.source().q()/g)),0);var j=Math.min($.ig.truncate(Math.ceil((this._cg.__x+e)*this.source().q()/g)),d);var k=Math.max($.ig.truncate(Math.floor(this._cg.__y*this.source().p()/h)),0);var l=Math.min($.ig.truncate(Math.ceil((this._cg.__y+f)*this.source().q()/h)),d);var m=(i*g-this._cg.__x*this.source().q())/g;var n=(k*h-this._cg.__y*this.source().p())/h;var o=e*this.source().q()/g*(this.source()._m/this._cj.width());var p=new $$4.x($$t.$am.$type,0);for(var q=i;q<j;++q){for(var r=k;r<l;++r){var s=this.a6(q,r,c);if(s>=0){p.add(this.aw.__inner[s]);this.aw.removeAt(s)}else{p.add(function(){var $ret=new $$t.am;$ret.c=q;$ret.d=r;$ret.e=c;return $ret}())}}}this.ap.f(true);this.b8();this.aw=p;for(var t=0;t<this.aw.count();++t){if(this.aw.__inner[t].h==null){this.aw.__inner[t].h=this.ap.a();this.aw.__inner[t].h.__opacity=1;this._an.am(this.aw.__inner[t].h);var u=this.am(this.aw.__inner[t]);if(u!=null){this.aw.__inner[t].h._ac=u}else{var v=null;var w=function(){var $ret=new $$t.am;$ret.c=$self.aw.__inner[t].c;$ret.d=$self.aw.__inner[t].d;$ret.e=$self.aw.__inner[t].e;return $ret}();while(w.e>=0&&v==null){w.c=w.c>>1;w.d=w.d>>1;w.e=w.e-1;v=this.am(w)}if(v!=null){var x=$.ig.truncate(Math.pow(2,this.aw.__inner[t].e-w.e));var y=$a(256,x);var z=y*(this.aw.__inner[t].c%x);var aa=y*(this.aw.__inner[t].d%x);this.aw.__inner[t].g=this.ap.a();this.aw.__inner[t].g.__opacity=1;this._an.an(this.aw.__inner[t].g);u=this._an.a(y,v,z,aa);this.aw.__inner[t].g._ac=u}this._an.u(this.aw.__inner[t])}}var ab=this.source()._m/o;var ac=this.source()._k/o;var ad=(this.aw.__inner[t].c-i+m)*ab;var ae=(this.aw.__inner[t].d-k+n)*ac;this.aw.__inner[t].h.width(ab+.5);this.aw.__inner[t].h.height(ac+.5);this._an.ao(this.aw.__inner[t].h,ad,ae);if(this.aw.__inner[t].g!=null){this.aw.__inner[t].g.width(ab+.5);this.aw.__inner[t].g.height(ac+.5);this._an.ao(this.aw.__inner[t].g,ad,ae)}}this.ap.f(false);this._an.aj()},au:false,b2:function(){if(this.source()==null||!this._an.f()||this._cj.width()==0||this._cj.height()==0){return}if(this.au){return}this.au=true;this._an.s(this.b3.runOn(this))},b8:function(){for(var a=0;a<this.aw.count();++a){this._an.r(this.aw.__inner[a]);this.bm(this.aw.__inner[a]);if(this.aw.__inner[a].h!=null){this.ap.n(this.aw.__inner[a].h);this.aw.__inner[a].h._ac=null;this.aw.__inner[a].h=null}}},b1:function(){this.ar().i()},am:function(a){return this.ar().item(a)},bl:function(a,b){this.ar().item(a,b)},aq:null,ar:function(a){if(arguments.length===1){this.aq=a;return a}else{return this.aq}},ax:null,at:function(){return this.ax.count()!=0},imageTilesReady:null,as:false,bq:function(){var a=true;if(this.at()){a=false}if(!this._an.d()){a=false}if(a&&!this.as){if(this.imageTilesReady!=null){this.imageTilesReady(this,new $$0.w)}}this.as=a},b7:function(a){if(a.g!=null){a.b=$$0.$s.now();this.ax.add(a);this._an.ap()}else{this.bq()}},bm:function(a){if(a.g!=null){this.ap.n(a.g);a.g._ac=null;a.g=null;for(var b=0;b<this.ax.count();++b){if(this.ax.__inner[b]==a){this.ax.removeAt(b);break}}if(this.ax.count()==0){this._an.ar()}}},bo:function(){var a=$$0.$s.now();var b=.5;for(var c=0;c<this.ax.count();){var d=a.getTime()-this.ax.__inner[c].b.getTime();var e=d/1e3;var f=e/b;f=$.ig.MathUtil.prototype.b(f,0,1);this.ax.__inner[c].g.__opacity=1-f;if(f>=1){this.ap.n(this.ax.__inner[c].g);this.ax.__inner[c].g._ac=null;this.ax.__inner[c].g=null;this.ax.removeAt(c)}else{++c}this._an.x()}if(this.ax.count()==0){this._an.ar()}},_cj:null,bv:function(){this._a0=this.viewportWidth();this._cg=this.viewportOrigin();this.b2()},provideContainer:function(a){var b=a;this.tileScheduler().j(b);this._an.ae(a)},provideContext:function(a){this._an.ag(a)},provideRenderer:function(a){this._an.ah(a)},provideViewport:function(a){this._an.ai(a)},_tileScheduler:null,tileScheduler:function(a){if(arguments.length===1){this._tileScheduler=a;return a}else{return this._tileScheduler}},bt:function(){if(this.imagesChanged!=null){this.imagesChanged(this,new $$0.w)}},imagesChanged:null,bn:function(){this.au=false},downloadingImage:null,cancellingImage:null,bs:function(a){if(this.downloadingImage!=null){this.downloadingImage(this,a)}},br:function(a){if(this.cancellingImage!=null){this.cancellingImage(this,a)}},az:0,a2:function(){return this.az},pixelScalingRatioChanged:function(a){this.az=a},a7:function(a){if(arguments.length===1){var b=a!=this.a7();if(b){this.ar(new $.ig.LRUCache$2($$t.$am.$type,$$t.$al.$type,1,a,new $$t.ao))}return a}else{return this.ar().h()}},$type:new $.ig.Type("XamMultiScaleImage",$$a.$f.$type,[$$0.$b6.$type])},true);$c("DownloadingMultiScaleImageEventArgs:at","EventArgs",{init:function(){$$0.$w.init.call(this)},_uri:null,uri:function(a){if(arguments.length===1){this._uri=a;return a}else{return this._uri}},_image:null,image:function(a){if(arguments.length===1){this._image=a;return a}else{return this._image}},$type:new $.ig.Type("DownloadingMultiScaleImageEventArgs",$$0.$w.$type)},true);$c("CancellingMultiScaleImageEventArgs:av","EventArgs",{init:function(){$$0.$w.init.call(this)},_uri:null,uri:function(a){if(arguments.length===1){this._uri=a;return a}else{return this._uri}},_image:null,image:function(a){if(arguments.length===1){this._image=a;return a}else{return this._image}},$type:new $.ig.Type("CancellingMultiScaleImageEventArgs",$$0.$w.$type)},true);$$t.$l.v={};$$t.$l.s=0;$$t.$l.m=0;$$t.$b.e=new $$t.q;$$t.$b.b=[];$$t.$b.__yValues=null;$$t.$b.__xValues=null;$$t.$b.__values=null;$$t.$w.shapefileSourceProperty=$$a.$s.i("ShapefileSource",$$6.$x.$type,$$t.$w.$type,new $$a.ac(2,null,function(a,b){$b($$t.$w.$type,a).ab("ShapefileSource",b.oldValue(),b.newValue())}));$$t.$w.databaseSourceProperty=$$a.$s.i("DatabaseSource",$$6.$x.$type,$$t.$w.$type,new $$a.ac(2,null,function(a,b){$b($$t.$w.$type,a).ab("DatabaseSource",b.oldValue(),b.newValue())}));$$t.$ab.j=null;if($$t.$ab.staticInit&&!$$t.$ab.shapeFileUtilStaticInitCalled){$$t.$ab.staticInit();$$t.$ab.shapeFileUtilStaticInitCalled=true}$$t.$ac.mapServerUriProperty=$$a.$s.i("MapServerUri",String,$$t.$ac.$type,new $$a.ac(2,null,$$t.$ac.y));$$t.$ac.isMapPublicProperty=$$a.$s.i("IsMapPublic",$$0.$aq.$type,$$t.$ac.$type,new $$a.ac(2,true,$$t.$ac.y));$$t.$ac.levelOfDetailProperty=$$a.$s.i("LevelOfDetail",$$0.$aw.$type,$$t.$ac.$type,new $$a.ac(2,(-1),$$t.$ac.y));$$t.$ac.userTokenProperty=$$a.$s.i("UserToken",String,$$t.$ac.$type,new $$a.ac(2,null,$$t.$ac.y));$$t.$ad.tilePathProperty=$$a.$s.i("TilePath",String,$$t.$ad.$type,new $$a.ac(2,null,$$t.$ad.aa));$$t.$ad.subDomainsProperty=$$a.$s.i("SubDomains",$$4.$f.$type.specialize(String),$$t.$ad.$type,new $$a.ac(2,null,$$t.$ad.aa));$$t.$ad.cultureNameProperty=$$a.$s.i("CultureName",String,$$t.$ad.$type,new $$a.ac(2,null,$$t.$ad.aa));$$t.$ak.sourceProperty=$$a.$s.i("Source",$$6.$x.$type,$$t.$ak.$type,new $$a.ac(2,null,function(a,b){$b($$t.$ak.$type,a).u("Source",b.oldValue(),b.newValue())}));$$t.$ar.sourceProperty=$$a.$s.i("Source",$$t.$aw.$type,$$t.$ar.$type,new $$a.ac(2,null,function(a,b){a.bu("Source",$b($$t.$aw.$type,b.oldValue()),$b($$t.$aw.$type,b.newValue()))}));$$t.$ar.viewportOriginProperty=$$a.$s.i("ViewportOrigin",$$a.$y.$type,$$t.$ar.$type,new $$a.ac(2,{__x:0,__y:0,$type:$$a.$y.$type,getType:$.ig.$op.getType,getGetHashCode:$.ig.$op.getGetHashCode,typeName:$.ig.$op.typeName},function(a,b){a.bu("ViewportOrigin",b.oldValue(),b.newValue())}));$$t.$ar.viewportWidthProperty=$$a.$s.i("ViewportWidth",Number,$$t.$ar.$type,new $$a.ac(2,1,function(a,b){a.bu("ViewportWidth",b.oldValue(),b.newValue())}));$$t.$ar.useSpringsProperty=$$a.$s.i("UseSprings",$$0.$aq.$type,$$t.$ar.$type,new $$a.ac(2,false,function(a,b){a.bu("UseSprings",b.oldValue(),b.newValue())}));$$t.$ar.springsEasingFunctionProperty=$$a.$s.i("SpringsEasingFunction",$$t.$aq.$type,$$t.$ar.$type,new $$a.ac(2,null,function(a,b){a.bu("SpringsEasingFunction",b.oldValue(),b.newValue())}));$$t.$ar.refererProperty=$$a.$s.i("Referer",String,$$t.$ar.$type,new $$a.ac(2,null,function(a,b){a.bu("Referer",b.oldValue(),b.newValue())}));$$t.$ar.userAgentProperty=$$a.$s.i("UserAgent",String,$$t.$ar.$type,new $$a.ac(2,null,function(a,b){a.bu("UserAgent",b.oldValue(),b.newValue())}))});(function(factory){if(typeof define==="function"&&define.amd){define("watermark",["jquery"],factory)}else{factory(jQuery)}})(function($){$(document).ready(function(){var wm=$("#__ig_wm__").length>0?$("#__ig_wm__"):$("<div id='__ig_wm__'></div>").appendTo(document.body);wm.css({position:"fixed",bottom:0,right:0,zIndex:1e3}).addClass("ui-igtrialwatermark")})});